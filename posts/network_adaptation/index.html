<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>视频会议系统的网络自适应机制详解 | 我的博客</title><meta name=keywords content="网络传输,实时通信,音视频传输,网络自适应,QoS,WebRTC"><meta name=description content="深入解析视频会议系统中的网络自适应机制，包括码率控制、丢包恢复、带宽估计等关键技术，以及它们如何协同工作以提供流畅的音视频体验"><meta name=author content="徐亚飞"><link rel=canonical href=https://xuyafei.github.io/personal-site/posts/network_adaptation/><link crossorigin=anonymous href=/personal-site/assets/css/stylesheet.93f625d739f1d6a5c6f20c146bc6a8d26b233492b34b2220c54b12fd46a04ded.css integrity="sha256-k/Yl1znx1qXG8gwUa8ao0msjNJKzSyIgxUsS/UagTe0=" rel="preload stylesheet" as=style><link rel=icon href=https://xuyafei.github.io/personal-site/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://xuyafei.github.io/personal-site/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://xuyafei.github.io/personal-site/favicon-32x32.png><link rel=apple-touch-icon href=https://xuyafei.github.io/personal-site/apple-touch-icon.png><link rel=mask-icon href=https://xuyafei.github.io/personal-site/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://xuyafei.github.io/personal-site/posts/network_adaptation/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAYQHy+K8nqKdr1EzvFzSQC+TAXx6gNQgoRxKtj+P9vvCCQTRWiV crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\[",right:"\\]",display:!0},{left:"\\(",right:"\\)",display:!1}],throwOnError:!1})})</script><script>MathJax={tex:{inlineMath:[["$","$"]],displayMath:[["$$","$$"]],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}}</script><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><meta property="og:url" content="https://xuyafei.github.io/personal-site/posts/network_adaptation/"><meta property="og:site_name" content="我的博客"><meta property="og:title" content="视频会议系统的网络自适应机制详解"><meta property="og:description" content="深入解析视频会议系统中的网络自适应机制，包括码率控制、丢包恢复、带宽估计等关键技术，以及它们如何协同工作以提供流畅的音视频体验"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-04-22T00:00:00+00:00"><meta property="article:modified_time" content="2024-04-22T00:00:00+00:00"><meta property="article:tag" content="网络传输"><meta property="article:tag" content="实时通信"><meta property="article:tag" content="音视频传输"><meta property="article:tag" content="网络自适应"><meta property="article:tag" content="QoS"><meta property="article:tag" content="WebRTC"><meta name=twitter:card content="summary"><meta name=twitter:title content="视频会议系统的网络自适应机制详解"><meta name=twitter:description content="深入解析视频会议系统中的网络自适应机制，包括码率控制、丢包恢复、带宽估计等关键技术，以及它们如何协同工作以提供流畅的音视频体验"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"文章","item":"https://xuyafei.github.io/personal-site/posts/"},{"@type":"ListItem","position":2,"name":"视频会议系统的网络自适应机制详解","item":"https://xuyafei.github.io/personal-site/posts/network_adaptation/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"视频会议系统的网络自适应机制详解","name":"视频会议系统的网络自适应机制详解","description":"深入解析视频会议系统中的网络自适应机制，包括码率控制、丢包恢复、带宽估计等关键技术，以及它们如何协同工作以提供流畅的音视频体验","keywords":["网络传输","实时通信","音视频传输","网络自适应","QoS","WebRTC"],"articleBody":"视频会议系统的网络自适应机制详解 一、概述 网络自适应机制是视频会议系统的关键组成部分，目标是根据网络质量动态调整编码策略，保证音视频流畅、清晰、不卡顿。本文将从多个层面系统讲解网络自适应的关键技术。\n二、码率控制（Bitrate Control） 1. 基本模式 1.1 恒定码率（CBR）vs 可变码率（VBR） 模式 特点 适用场景 CBR 保持稳定的码率，不随内容和网络变化 带宽受限场景 VBR 根据内容复杂度调整码率，压缩效率更高 带宽充足场景 1.2 实时控制方式 使用反馈信息（如RTCP或自定义带宽估计模块）调整编码器目标码率 当网络变差时，主动降低目标码率，减少丢包、卡顿 编码器内部调整： 量化参数QP：提高压缩比，牺牲画质 编码复杂度：减少参考帧、运动估计区域 2. 码率控制算法 2.1 基于延迟的拥塞控制 $$ TargetBitrate = CurrentBitrate \\times (1 - \\frac{Delay}{MaxDelay}) $$\n2.2 基于丢包的拥塞控制 $$ TargetBitrate = CurrentBitrate \\times (1 - \\frac{PacketLoss}{MaxLoss}) $$\n三、丢包策略与恢复机制 1. 丢包感知 通过RTCP Receiver Report汇总丢包率（fraction lost） 通过WebRTC的RTCIceCandidateStats、RTCInboundRTPStreamStats获取实时丢包信息 2. 音视频丢包恢复方法 2.1 音频恢复技术 技术 说明 适用场景 PLC 使用前一帧音频平滑过渡填补丢帧 单帧丢失 FEC 发送冗余包，接收端可恢复少量丢包 低丢包率 DTX/CNG 静音时节省带宽，插值恢复静音段 静音场景 2.2 视频恢复技术 技术 说明 适用场景 NACK 请求关键丢包重传，延迟可控前提下有效 关键帧丢失 FEC 加入纠错包 低丢包率 SVC 分层视频结构，核心层可独立解码 带宽波动 IDR 网络恢复时，强制送一帧关键帧 严重丢包 3. 详细技术分析 3.1 PLC（Packet Loss Concealment） 使用前一帧或一小段连续帧生成\"合成音\" 常见方法： 重复前一帧 谱估计 + 预测合成 应用： Opus编码器内部PLC能力 优点：无延迟、无带宽开销 缺点：连续丢包效果变差 3.2 FEC（Forward Error Correction） 多发送冗余包（如X + Y + Z + “X⊕Y⊕Z”） Opus支持内建FEC（in-band FEC） 适合丢包率3~10%，延迟容忍较低（\u003c100ms）的场景 3.3 NACK（Negative Acknowledgement） 接收端通过RTCP或TWCC上报缺失帧编号 适用： 网络质量稳定 丢包不频繁 限制： 增加延迟 带宽拥塞时可能失败 四、带宽估计（Bandwidth Estimation） 1. 基本原理 通过测量接收/发送包的间隔、大小、丢包率、延迟变化等估算当前网络带宽。\n2. WebRTC带宽估计机制 2.1 Send Side BWE 发送方主动控制发送速率 利用RTCP + TWCC反馈估算带宽 实现算法： Google Congestion Control (GCC) Trendline Filter 2.2 Receiver Side BWE 接收端反馈感知码流质量 发送端按需调整 优势： 更准确的网络状况感知 更快的响应速度 3. 带宽估计算法 3.1 基于延迟的估计 $$ Bandwidth = \\frac{PacketSize}{RTT} $$\n3.2 基于丢包的估计 $$ Bandwidth = CurrentBitrate \\times (1 - PacketLossRate) $$\n五、分辨率与帧率调整 1. 分辨率（Resolution） 高分辨率 → 占用码率高 → 画面清晰但占资源多 网络差时动态降为： 720p → 480p → 360p等 2. 帧率（Frame Rate） 正常为30fps/25fps 若CPU/带宽吃紧，可降为15fps/10fps 降帧率可减少传输包数量，缓解延迟 3. 调整策略 低码率时优先降帧率（不牺牲清晰度） 再降分辨率 最后必要时降低图像质量（升QP） 六、应用场景对比 场景 首选策略 说明 高丢包、低延迟要求 音频：PLC + FEC；视频：FEC 如远程手术、语音通话 中等丢包、延迟可容忍 NACK + FEC 视频会议常见模式 静音/无视频场景 音频：DTX + CNG；视频：暂停发送 节省带宽，保持占位 局域网高质量传输 可使用NACK、快速IDR 重传延迟小，恢复速度快 移动/4G弱网环境 FEC + 降帧率/分辨率 避免大量重传，降低整体传输压力 七、整体工作流程 采集端获取音视频帧 编码器根据目标码率+帧率+分辨率压缩 网络监测模块实时监听丢包、延迟、带宽变化 控制模块根据反馈动态调整： 编码参数（QP、码率、分辨率、帧率） 纠错机制（FEC/NACK） 是否请求关键帧刷新（IDR） 接收端解码 + jitter buffer + 丢包补偿 八、总结 音频更强调平滑过渡和可听性，因而多使用预测与掩盖（如PLC）； 视频更强调画面连续与完整性，因而需要更精细的丢包识别与冗余恢复机制（如NACK、FEC、IDR）。\n参考文献：\n“WebRTC: APIs and RTCWEB Protocols of the HTML5 Real-Time Web” by Alan B. Johnston “Real-Time Communication with WebRTC” by Salvatore Loreto “Video Coding for Mobile Communications” by Mohammed Ghanbari “Network Performance Analysis” by Thomas Bonald “Digital Video Processing” by A. Murat Tekalp “Internetworking with TCP/IP” by Douglas E. Comer “Computer Networks” by Andrew S. Tanenbaum “Multimedia Communications” by Fred Halsall “Streaming Media” by Geoff Huston “The WebRTC Book” by Alan B. Johnston ","wordCount":"324","inLanguage":"en","datePublished":"2024-04-22T00:00:00Z","dateModified":"2024-04-22T00:00:00Z","author":{"@type":"Person","name":"徐亚飞"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://xuyafei.github.io/personal-site/posts/network_adaptation/"},"publisher":{"@type":"Organization","name":"我的博客","logo":{"@type":"ImageObject","url":"https://xuyafei.github.io/personal-site/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://xuyafei.github.io/personal-site/ accesskey=h title="我的博客 (Alt + H)">我的博客</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://xuyafei.github.io/personal-site/categories/ title=分类><span>分类</span></a></li><li><a href=https://xuyafei.github.io/personal-site/tags/ title=标签><span>标签</span></a></li><li><a href=https://xuyafei.github.io/personal-site/archives/ title=归档><span>归档</span></a></li><li><a href=https://xuyafei.github.io/personal-site/search/ title=搜索><span>搜索</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://xuyafei.github.io/personal-site/>Home</a>&nbsp;»&nbsp;<a href=https://xuyafei.github.io/personal-site/posts/>文章</a></div><h1 class="post-title entry-hint-parent">视频会议系统的网络自适应机制详解</h1><div class=post-description>深入解析视频会议系统中的网络自适应机制，包括码率控制、丢包恢复、带宽估计等关键技术，以及它们如何协同工作以提供流畅的音视频体验</div><div class=post-meta><span title='2024-04-22 00:00:00 +0000 UTC'>April 22, 2024</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;徐亚飞</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e8%a7%86%e9%a2%91%e4%bc%9a%e8%ae%ae%e7%b3%bb%e7%bb%9f%e7%9a%84%e7%bd%91%e7%bb%9c%e8%87%aa%e9%80%82%e5%ba%94%e6%9c%ba%e5%88%b6%e8%af%a6%e8%a7%a3 aria-label=视频会议系统的网络自适应机制详解>视频会议系统的网络自适应机制详解</a><ul><li><a href=#%e4%b8%80%e6%a6%82%e8%bf%b0 aria-label=一、概述>一、概述</a></li><li><a href=#%e4%ba%8c%e7%a0%81%e7%8e%87%e6%8e%a7%e5%88%b6bitrate-control aria-label="二、码率控制（Bitrate Control）">二、码率控制（Bitrate Control）</a><ul><li><a href=#1-%e5%9f%ba%e6%9c%ac%e6%a8%a1%e5%bc%8f aria-label="1. 基本模式">1. 基本模式</a><ul><li><a href=#11-%e6%81%92%e5%ae%9a%e7%a0%81%e7%8e%87cbrvs-%e5%8f%af%e5%8f%98%e7%a0%81%e7%8e%87vbr aria-label="1.1 恒定码率（CBR）vs 可变码率（VBR）">1.1 恒定码率（CBR）vs 可变码率（VBR）</a></li><li><a href=#12-%e5%ae%9e%e6%97%b6%e6%8e%a7%e5%88%b6%e6%96%b9%e5%bc%8f aria-label="1.2 实时控制方式">1.2 实时控制方式</a></li></ul></li><li><a href=#2-%e7%a0%81%e7%8e%87%e6%8e%a7%e5%88%b6%e7%ae%97%e6%b3%95 aria-label="2. 码率控制算法">2. 码率控制算法</a><ul><li><a href=#21-%e5%9f%ba%e4%ba%8e%e5%bb%b6%e8%bf%9f%e7%9a%84%e6%8b%a5%e5%a1%9e%e6%8e%a7%e5%88%b6 aria-label="2.1 基于延迟的拥塞控制">2.1 基于延迟的拥塞控制</a></li><li><a href=#22-%e5%9f%ba%e4%ba%8e%e4%b8%a2%e5%8c%85%e7%9a%84%e6%8b%a5%e5%a1%9e%e6%8e%a7%e5%88%b6 aria-label="2.2 基于丢包的拥塞控制">2.2 基于丢包的拥塞控制</a></li></ul></li></ul></li><li><a href=#%e4%b8%89%e4%b8%a2%e5%8c%85%e7%ad%96%e7%95%a5%e4%b8%8e%e6%81%a2%e5%a4%8d%e6%9c%ba%e5%88%b6 aria-label=三、丢包策略与恢复机制>三、丢包策略与恢复机制</a><ul><li><a href=#1-%e4%b8%a2%e5%8c%85%e6%84%9f%e7%9f%a5 aria-label="1. 丢包感知">1. 丢包感知</a></li><li><a href=#2-%e9%9f%b3%e8%a7%86%e9%a2%91%e4%b8%a2%e5%8c%85%e6%81%a2%e5%a4%8d%e6%96%b9%e6%b3%95 aria-label="2. 音视频丢包恢复方法">2. 音视频丢包恢复方法</a><ul><li><a href=#21-%e9%9f%b3%e9%a2%91%e6%81%a2%e5%a4%8d%e6%8a%80%e6%9c%af aria-label="2.1 音频恢复技术">2.1 音频恢复技术</a></li><li><a href=#22-%e8%a7%86%e9%a2%91%e6%81%a2%e5%a4%8d%e6%8a%80%e6%9c%af aria-label="2.2 视频恢复技术">2.2 视频恢复技术</a></li></ul></li><li><a href=#3-%e8%af%a6%e7%bb%86%e6%8a%80%e6%9c%af%e5%88%86%e6%9e%90 aria-label="3. 详细技术分析">3. 详细技术分析</a><ul><li><a href=#31-plcpacket-loss-concealment aria-label="3.1 PLC（Packet Loss Concealment）">3.1 PLC（Packet Loss Concealment）</a></li><li><a href=#32-fecforward-error-correction aria-label="3.2 FEC（Forward Error Correction）">3.2 FEC（Forward Error Correction）</a></li><li><a href=#33-nacknegative-acknowledgement aria-label="3.3 NACK（Negative Acknowledgement）">3.3 NACK（Negative Acknowledgement）</a></li></ul></li></ul></li><li><a href=#%e5%9b%9b%e5%b8%a6%e5%ae%bd%e4%bc%b0%e8%ae%a1bandwidth-estimation aria-label="四、带宽估计（Bandwidth Estimation）">四、带宽估计（Bandwidth Estimation）</a><ul><li><a href=#1-%e5%9f%ba%e6%9c%ac%e5%8e%9f%e7%90%86 aria-label="1. 基本原理">1. 基本原理</a></li><li><a href=#2-webrtc%e5%b8%a6%e5%ae%bd%e4%bc%b0%e8%ae%a1%e6%9c%ba%e5%88%b6 aria-label="2. WebRTC带宽估计机制">2. WebRTC带宽估计机制</a><ul><li><a href=#21-send-side-bwe aria-label="2.1 Send Side BWE">2.1 Send Side BWE</a></li><li><a href=#22-receiver-side-bwe aria-label="2.2 Receiver Side BWE">2.2 Receiver Side BWE</a></li></ul></li><li><a href=#3-%e5%b8%a6%e5%ae%bd%e4%bc%b0%e8%ae%a1%e7%ae%97%e6%b3%95 aria-label="3. 带宽估计算法">3. 带宽估计算法</a><ul><li><a href=#31-%e5%9f%ba%e4%ba%8e%e5%bb%b6%e8%bf%9f%e7%9a%84%e4%bc%b0%e8%ae%a1 aria-label="3.1 基于延迟的估计">3.1 基于延迟的估计</a></li><li><a href=#32-%e5%9f%ba%e4%ba%8e%e4%b8%a2%e5%8c%85%e7%9a%84%e4%bc%b0%e8%ae%a1 aria-label="3.2 基于丢包的估计">3.2 基于丢包的估计</a></li></ul></li></ul></li><li><a href=#%e4%ba%94%e5%88%86%e8%be%a8%e7%8e%87%e4%b8%8e%e5%b8%a7%e7%8e%87%e8%b0%83%e6%95%b4 aria-label=五、分辨率与帧率调整>五、分辨率与帧率调整</a><ul><li><a href=#1-%e5%88%86%e8%be%a8%e7%8e%87resolution aria-label="1. 分辨率（Resolution）">1. 分辨率（Resolution）</a></li><li><a href=#2-%e5%b8%a7%e7%8e%87frame-rate aria-label="2. 帧率（Frame Rate）">2. 帧率（Frame Rate）</a></li><li><a href=#3-%e8%b0%83%e6%95%b4%e7%ad%96%e7%95%a5 aria-label="3. 调整策略">3. 调整策略</a></li></ul></li><li><a href=#%e5%85%ad%e5%ba%94%e7%94%a8%e5%9c%ba%e6%99%af%e5%af%b9%e6%af%94 aria-label=六、应用场景对比>六、应用场景对比</a></li><li><a href=#%e4%b8%83%e6%95%b4%e4%bd%93%e5%b7%a5%e4%bd%9c%e6%b5%81%e7%a8%8b aria-label=七、整体工作流程>七、整体工作流程</a></li><li><a href=#%e5%85%ab%e6%80%bb%e7%bb%93 aria-label=八、总结>八、总结</a></li></ul></li></ul></div></details></div><div class=post-content><h1 id=视频会议系统的网络自适应机制详解>视频会议系统的网络自适应机制详解<a hidden class=anchor aria-hidden=true href=#视频会议系统的网络自适应机制详解>#</a></h1><h2 id=一概述>一、概述<a hidden class=anchor aria-hidden=true href=#一概述>#</a></h2><p>网络自适应机制是视频会议系统的关键组成部分，目标是根据网络质量动态调整编码策略，保证音视频流畅、清晰、不卡顿。本文将从多个层面系统讲解网络自适应的关键技术。</p><h2 id=二码率控制bitrate-control>二、码率控制（Bitrate Control）<a hidden class=anchor aria-hidden=true href=#二码率控制bitrate-control>#</a></h2><h3 id=1-基本模式>1. 基本模式<a hidden class=anchor aria-hidden=true href=#1-基本模式>#</a></h3><h4 id=11-恒定码率cbrvs-可变码率vbr>1.1 恒定码率（CBR）vs 可变码率（VBR）<a hidden class=anchor aria-hidden=true href=#11-恒定码率cbrvs-可变码率vbr>#</a></h4><table><thead><tr><th>模式</th><th>特点</th><th>适用场景</th></tr></thead><tbody><tr><td>CBR</td><td>保持稳定的码率，不随内容和网络变化</td><td>带宽受限场景</td></tr><tr><td>VBR</td><td>根据内容复杂度调整码率，压缩效率更高</td><td>带宽充足场景</td></tr></tbody></table><h4 id=12-实时控制方式>1.2 实时控制方式<a hidden class=anchor aria-hidden=true href=#12-实时控制方式>#</a></h4><ul><li>使用反馈信息（如RTCP或自定义带宽估计模块）调整编码器目标码率</li><li>当网络变差时，主动降低目标码率，减少丢包、卡顿</li><li>编码器内部调整：<ul><li>量化参数QP：提高压缩比，牺牲画质</li><li>编码复杂度：减少参考帧、运动估计区域</li></ul></li></ul><h3 id=2-码率控制算法>2. 码率控制算法<a hidden class=anchor aria-hidden=true href=#2-码率控制算法>#</a></h3><h4 id=21-基于延迟的拥塞控制>2.1 基于延迟的拥塞控制<a hidden class=anchor aria-hidden=true href=#21-基于延迟的拥塞控制>#</a></h4><p>$$
TargetBitrate = CurrentBitrate \times (1 - \frac{Delay}{MaxDelay})
$$</p><h4 id=22-基于丢包的拥塞控制>2.2 基于丢包的拥塞控制<a hidden class=anchor aria-hidden=true href=#22-基于丢包的拥塞控制>#</a></h4><p>$$
TargetBitrate = CurrentBitrate \times (1 - \frac{PacketLoss}{MaxLoss})
$$</p><h2 id=三丢包策略与恢复机制>三、丢包策略与恢复机制<a hidden class=anchor aria-hidden=true href=#三丢包策略与恢复机制>#</a></h2><h3 id=1-丢包感知>1. 丢包感知<a hidden class=anchor aria-hidden=true href=#1-丢包感知>#</a></h3><ul><li>通过RTCP Receiver Report汇总丢包率（fraction lost）</li><li>通过WebRTC的RTCIceCandidateStats、RTCInboundRTPStreamStats获取实时丢包信息</li></ul><h3 id=2-音视频丢包恢复方法>2. 音视频丢包恢复方法<a hidden class=anchor aria-hidden=true href=#2-音视频丢包恢复方法>#</a></h3><h4 id=21-音频恢复技术>2.1 音频恢复技术<a hidden class=anchor aria-hidden=true href=#21-音频恢复技术>#</a></h4><table><thead><tr><th>技术</th><th>说明</th><th>适用场景</th></tr></thead><tbody><tr><td>PLC</td><td>使用前一帧音频平滑过渡填补丢帧</td><td>单帧丢失</td></tr><tr><td>FEC</td><td>发送冗余包，接收端可恢复少量丢包</td><td>低丢包率</td></tr><tr><td>DTX/CNG</td><td>静音时节省带宽，插值恢复静音段</td><td>静音场景</td></tr></tbody></table><h4 id=22-视频恢复技术>2.2 视频恢复技术<a hidden class=anchor aria-hidden=true href=#22-视频恢复技术>#</a></h4><table><thead><tr><th>技术</th><th>说明</th><th>适用场景</th></tr></thead><tbody><tr><td>NACK</td><td>请求关键丢包重传，延迟可控前提下有效</td><td>关键帧丢失</td></tr><tr><td>FEC</td><td>加入纠错包</td><td>低丢包率</td></tr><tr><td>SVC</td><td>分层视频结构，核心层可独立解码</td><td>带宽波动</td></tr><tr><td>IDR</td><td>网络恢复时，强制送一帧关键帧</td><td>严重丢包</td></tr></tbody></table><h3 id=3-详细技术分析>3. 详细技术分析<a hidden class=anchor aria-hidden=true href=#3-详细技术分析>#</a></h3><h4 id=31-plcpacket-loss-concealment>3.1 PLC（Packet Loss Concealment）<a hidden class=anchor aria-hidden=true href=#31-plcpacket-loss-concealment>#</a></h4><ul><li>使用前一帧或一小段连续帧生成"合成音"</li><li>常见方法：<ul><li>重复前一帧</li><li>谱估计 + 预测合成</li></ul></li><li>应用：<ul><li>Opus编码器内部PLC能力</li><li>优点：无延迟、无带宽开销</li><li>缺点：连续丢包效果变差</li></ul></li></ul><h4 id=32-fecforward-error-correction>3.2 FEC（Forward Error Correction）<a hidden class=anchor aria-hidden=true href=#32-fecforward-error-correction>#</a></h4><ul><li>多发送冗余包（如X + Y + Z + &ldquo;X⊕Y⊕Z&rdquo;）</li><li>Opus支持内建FEC（in-band FEC）</li><li>适合丢包率3~10%，延迟容忍较低（&lt;100ms）的场景</li></ul><h4 id=33-nacknegative-acknowledgement>3.3 NACK（Negative Acknowledgement）<a hidden class=anchor aria-hidden=true href=#33-nacknegative-acknowledgement>#</a></h4><ul><li>接收端通过RTCP或TWCC上报缺失帧编号</li><li>适用：<ul><li>网络质量稳定</li><li>丢包不频繁</li></ul></li><li>限制：<ul><li>增加延迟</li><li>带宽拥塞时可能失败</li></ul></li></ul><h2 id=四带宽估计bandwidth-estimation>四、带宽估计（Bandwidth Estimation）<a hidden class=anchor aria-hidden=true href=#四带宽估计bandwidth-estimation>#</a></h2><h3 id=1-基本原理>1. 基本原理<a hidden class=anchor aria-hidden=true href=#1-基本原理>#</a></h3><p>通过测量接收/发送包的间隔、大小、丢包率、延迟变化等估算当前网络带宽。</p><h3 id=2-webrtc带宽估计机制>2. WebRTC带宽估计机制<a hidden class=anchor aria-hidden=true href=#2-webrtc带宽估计机制>#</a></h3><h4 id=21-send-side-bwe>2.1 Send Side BWE<a hidden class=anchor aria-hidden=true href=#21-send-side-bwe>#</a></h4><ul><li>发送方主动控制发送速率</li><li>利用RTCP + TWCC反馈估算带宽</li><li>实现算法：<ul><li>Google Congestion Control (GCC)</li><li>Trendline Filter</li></ul></li></ul><h4 id=22-receiver-side-bwe>2.2 Receiver Side BWE<a hidden class=anchor aria-hidden=true href=#22-receiver-side-bwe>#</a></h4><ul><li>接收端反馈感知码流质量</li><li>发送端按需调整</li><li>优势：<ul><li>更准确的网络状况感知</li><li>更快的响应速度</li></ul></li></ul><h3 id=3-带宽估计算法>3. 带宽估计算法<a hidden class=anchor aria-hidden=true href=#3-带宽估计算法>#</a></h3><h4 id=31-基于延迟的估计>3.1 基于延迟的估计<a hidden class=anchor aria-hidden=true href=#31-基于延迟的估计>#</a></h4><p>$$
Bandwidth = \frac{PacketSize}{RTT}
$$</p><h4 id=32-基于丢包的估计>3.2 基于丢包的估计<a hidden class=anchor aria-hidden=true href=#32-基于丢包的估计>#</a></h4><p>$$
Bandwidth = CurrentBitrate \times (1 - PacketLossRate)
$$</p><h2 id=五分辨率与帧率调整>五、分辨率与帧率调整<a hidden class=anchor aria-hidden=true href=#五分辨率与帧率调整>#</a></h2><h3 id=1-分辨率resolution>1. 分辨率（Resolution）<a hidden class=anchor aria-hidden=true href=#1-分辨率resolution>#</a></h3><ul><li>高分辨率 → 占用码率高 → 画面清晰但占资源多</li><li>网络差时动态降为：<ul><li>720p → 480p → 360p等</li></ul></li></ul><h3 id=2-帧率frame-rate>2. 帧率（Frame Rate）<a hidden class=anchor aria-hidden=true href=#2-帧率frame-rate>#</a></h3><ul><li>正常为30fps/25fps</li><li>若CPU/带宽吃紧，可降为15fps/10fps</li><li>降帧率可减少传输包数量，缓解延迟</li></ul><h3 id=3-调整策略>3. 调整策略<a hidden class=anchor aria-hidden=true href=#3-调整策略>#</a></h3><ol><li>低码率时优先降帧率（不牺牲清晰度）</li><li>再降分辨率</li><li>最后必要时降低图像质量（升QP）</li></ol><h2 id=六应用场景对比>六、应用场景对比<a hidden class=anchor aria-hidden=true href=#六应用场景对比>#</a></h2><table><thead><tr><th>场景</th><th>首选策略</th><th>说明</th></tr></thead><tbody><tr><td>高丢包、低延迟要求</td><td>音频：PLC + FEC；视频：FEC</td><td>如远程手术、语音通话</td></tr><tr><td>中等丢包、延迟可容忍</td><td>NACK + FEC</td><td>视频会议常见模式</td></tr><tr><td>静音/无视频场景</td><td>音频：DTX + CNG；视频：暂停发送</td><td>节省带宽，保持占位</td></tr><tr><td>局域网高质量传输</td><td>可使用NACK、快速IDR</td><td>重传延迟小，恢复速度快</td></tr><tr><td>移动/4G弱网环境</td><td>FEC + 降帧率/分辨率</td><td>避免大量重传，降低整体传输压力</td></tr></tbody></table><h2 id=七整体工作流程>七、整体工作流程<a hidden class=anchor aria-hidden=true href=#七整体工作流程>#</a></h2><ol><li>采集端获取音视频帧</li><li>编码器根据目标码率+帧率+分辨率压缩</li><li>网络监测模块实时监听丢包、延迟、带宽变化</li><li>控制模块根据反馈动态调整：<ul><li>编码参数（QP、码率、分辨率、帧率）</li><li>纠错机制（FEC/NACK）</li><li>是否请求关键帧刷新（IDR）</li></ul></li><li>接收端解码 + jitter buffer + 丢包补偿</li></ol><h2 id=八总结>八、总结<a hidden class=anchor aria-hidden=true href=#八总结>#</a></h2><p>音频更强调平滑过渡和可听性，因而多使用预测与掩盖（如PLC）；
视频更强调画面连续与完整性，因而需要更精细的丢包识别与冗余恢复机制（如NACK、FEC、IDR）。</p><hr><p><em>参考文献：</em></p><ol><li>&ldquo;WebRTC: APIs and RTCWEB Protocols of the HTML5 Real-Time Web&rdquo; by Alan B. Johnston</li><li>&ldquo;Real-Time Communication with WebRTC&rdquo; by Salvatore Loreto</li><li>&ldquo;Video Coding for Mobile Communications&rdquo; by Mohammed Ghanbari</li><li>&ldquo;Network Performance Analysis&rdquo; by Thomas Bonald</li><li>&ldquo;Digital Video Processing&rdquo; by A. Murat Tekalp</li><li>&ldquo;Internetworking with TCP/IP&rdquo; by Douglas E. Comer</li><li>&ldquo;Computer Networks&rdquo; by Andrew S. Tanenbaum</li><li>&ldquo;Multimedia Communications&rdquo; by Fred Halsall</li><li>&ldquo;Streaming Media&rdquo; by Geoff Huston</li><li>&ldquo;The WebRTC Book&rdquo; by Alan B. Johnston</li></ol></div><footer class=post-footer><ul class=post-tags><li><a href=https://xuyafei.github.io/personal-site/tags/%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93/>网络传输</a></li><li><a href=https://xuyafei.github.io/personal-site/tags/%E5%AE%9E%E6%97%B6%E9%80%9A%E4%BF%A1/>实时通信</a></li><li><a href=https://xuyafei.github.io/personal-site/tags/%E9%9F%B3%E8%A7%86%E9%A2%91%E4%BC%A0%E8%BE%93/>音视频传输</a></li><li><a href=https://xuyafei.github.io/personal-site/tags/%E7%BD%91%E7%BB%9C%E8%87%AA%E9%80%82%E5%BA%94/>网络自适应</a></li><li><a href=https://xuyafei.github.io/personal-site/tags/qos/>QoS</a></li><li><a href=https://xuyafei.github.io/personal-site/tags/webrtc/>WebRTC</a></li></ul><nav class=paginav><a class=prev href=https://xuyafei.github.io/personal-site/posts/network_jitter_buffer/><span class=title>« Prev</span><br><span>网络抖动与Jitter Buffer详解</span>
</a><a class=next href=https://xuyafei.github.io/personal-site/posts/audio_loss_recovery/><span class=title>Next »</span><br><span>音频丢包恢复机制详解：PLC与FEC技术</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share 视频会议系统的网络自适应机制详解 on x" href="https://x.com/intent/tweet/?text=%e8%a7%86%e9%a2%91%e4%bc%9a%e8%ae%ae%e7%b3%bb%e7%bb%9f%e7%9a%84%e7%bd%91%e7%bb%9c%e8%87%aa%e9%80%82%e5%ba%94%e6%9c%ba%e5%88%b6%e8%af%a6%e8%a7%a3&amp;url=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2fnetwork_adaptation%2f&amp;hashtags=%e7%bd%91%e7%bb%9c%e4%bc%a0%e8%be%93%2c%e5%ae%9e%e6%97%b6%e9%80%9a%e4%bf%a1%2c%e9%9f%b3%e8%a7%86%e9%a2%91%e4%bc%a0%e8%be%93%2c%e7%bd%91%e7%bb%9c%e8%87%aa%e9%80%82%e5%ba%94%2cQoS%2cWebRTC"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 视频会议系统的网络自适应机制详解 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2fnetwork_adaptation%2f&amp;title=%e8%a7%86%e9%a2%91%e4%bc%9a%e8%ae%ae%e7%b3%bb%e7%bb%9f%e7%9a%84%e7%bd%91%e7%bb%9c%e8%87%aa%e9%80%82%e5%ba%94%e6%9c%ba%e5%88%b6%e8%af%a6%e8%a7%a3&amp;summary=%e8%a7%86%e9%a2%91%e4%bc%9a%e8%ae%ae%e7%b3%bb%e7%bb%9f%e7%9a%84%e7%bd%91%e7%bb%9c%e8%87%aa%e9%80%82%e5%ba%94%e6%9c%ba%e5%88%b6%e8%af%a6%e8%a7%a3&amp;source=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2fnetwork_adaptation%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 视频会议系统的网络自适应机制详解 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2fnetwork_adaptation%2f&title=%e8%a7%86%e9%a2%91%e4%bc%9a%e8%ae%ae%e7%b3%bb%e7%bb%9f%e7%9a%84%e7%bd%91%e7%bb%9c%e8%87%aa%e9%80%82%e5%ba%94%e6%9c%ba%e5%88%b6%e8%af%a6%e8%a7%a3"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 视频会议系统的网络自适应机制详解 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2fnetwork_adaptation%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 视频会议系统的网络自适应机制详解 on whatsapp" href="https://api.whatsapp.com/send?text=%e8%a7%86%e9%a2%91%e4%bc%9a%e8%ae%ae%e7%b3%bb%e7%bb%9f%e7%9a%84%e7%bd%91%e7%bb%9c%e8%87%aa%e9%80%82%e5%ba%94%e6%9c%ba%e5%88%b6%e8%af%a6%e8%a7%a3%20-%20https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2fnetwork_adaptation%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 视频会议系统的网络自适应机制详解 on telegram" href="https://telegram.me/share/url?text=%e8%a7%86%e9%a2%91%e4%bc%9a%e8%ae%ae%e7%b3%bb%e7%bb%9f%e7%9a%84%e7%bd%91%e7%bb%9c%e8%87%aa%e9%80%82%e5%ba%94%e6%9c%ba%e5%88%b6%e8%af%a6%e8%a7%a3&amp;url=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2fnetwork_adaptation%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 视频会议系统的网络自适应机制详解 on ycombinator" href="https://news.ycombinator.com/submitlink?t=%e8%a7%86%e9%a2%91%e4%bc%9a%e8%ae%ae%e7%b3%bb%e7%bb%9f%e7%9a%84%e7%bd%91%e7%bb%9c%e8%87%aa%e9%80%82%e5%ba%94%e6%9c%ba%e5%88%b6%e8%af%a6%e8%a7%a3&u=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2fnetwork_adaptation%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://xuyafei.github.io/personal-site/>我的博客</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>
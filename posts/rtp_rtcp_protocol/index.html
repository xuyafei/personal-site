<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>RTP/RTCP协议详解 | 我的博客</title><meta name=keywords content="网络协议,RTP,RTCP,实时传输,音视频传输,WebRTC"><meta name=description content="深入解析RTP和RTCP协议的原理、结构及应用，包括其在实时音视频传输中的关键作用"><meta name=author content="徐亚飞"><link rel=canonical href=https://xuyafei.github.io/personal-site/posts/rtp_rtcp_protocol/><link crossorigin=anonymous href=/personal-site/assets/css/stylesheet.93f625d739f1d6a5c6f20c146bc6a8d26b233492b34b2220c54b12fd46a04ded.css integrity="sha256-k/Yl1znx1qXG8gwUa8ao0msjNJKzSyIgxUsS/UagTe0=" rel="preload stylesheet" as=style><link rel=icon href=https://xuyafei.github.io/personal-site/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://xuyafei.github.io/personal-site/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://xuyafei.github.io/personal-site/favicon-32x32.png><link rel=apple-touch-icon href=https://xuyafei.github.io/personal-site/apple-touch-icon.png><link rel=mask-icon href=https://xuyafei.github.io/personal-site/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://xuyafei.github.io/personal-site/posts/rtp_rtcp_protocol/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAYQHy+K8nqKdr1EzvFzSQC+TAXx6gNQgoRxKtj+P9vvCCQTRWiV crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\[",right:"\\]",display:!0},{left:"\\(",right:"\\)",display:!1}],throwOnError:!1})})</script><script>MathJax={tex:{inlineMath:[["$","$"]],displayMath:[["$$","$$"]],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}}</script><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><meta property="og:url" content="https://xuyafei.github.io/personal-site/posts/rtp_rtcp_protocol/"><meta property="og:site_name" content="我的博客"><meta property="og:title" content="RTP/RTCP协议详解"><meta property="og:description" content="深入解析RTP和RTCP协议的原理、结构及应用，包括其在实时音视频传输中的关键作用"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-04-22T00:00:00+00:00"><meta property="article:modified_time" content="2024-04-22T00:00:00+00:00"><meta property="article:tag" content="网络协议"><meta property="article:tag" content="RTP"><meta property="article:tag" content="RTCP"><meta property="article:tag" content="实时传输"><meta property="article:tag" content="音视频传输"><meta property="article:tag" content="WebRTC"><meta name=twitter:card content="summary"><meta name=twitter:title content="RTP/RTCP协议详解"><meta name=twitter:description content="深入解析RTP和RTCP协议的原理、结构及应用，包括其在实时音视频传输中的关键作用"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"文章","item":"https://xuyafei.github.io/personal-site/posts/"},{"@type":"ListItem","position":2,"name":"RTP/RTCP协议详解","item":"https://xuyafei.github.io/personal-site/posts/rtp_rtcp_protocol/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"RTP/RTCP协议详解","name":"RTP\/RTCP协议详解","description":"深入解析RTP和RTCP协议的原理、结构及应用，包括其在实时音视频传输中的关键作用","keywords":["网络协议","RTP","RTCP","实时传输","音视频传输","WebRTC"],"articleBody":"RTP/RTCP协议详解 一、RTP（Real-time Transport Protocol） 1. 基本概念 RTP是一种用于实时音视频数据传输的协议：\n用于实时音视频数据的传输（例如：H.264视频、Opus音频） 基于UDP，具备低延迟特性 不保证传输可靠性（不重传），但设计了时序和同步机制 2. RTP包结构 RTP包包含以下关键字段：\n序列号：用于丢包检测、顺序恢复 时间戳：标记数据帧时间，供同步播放 SSRC：同步源标识（每路音视频流唯一） 3. RTP报文结构 0 1 2 3 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ |V=2|P|X| CC |M| PT | sequence number | +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ | timestamp | +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ | synchronization source (SSRC) identifier | +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ | contributing source (CSRC) identifiers | (optional) +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ | Payload (媒体数据) | +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 关键字段解释 字段 含义 Version RTP版本号，目前是2 Sequence Number 包的序列号，接收端用它来检测丢包 Timestamp 当前帧的时间戳，用于播放同步 SSRC 同步源标识符，区分不同的流 PT（Payload Type） 表示负载类型（比如96表示H264，111表示Opus） M（Marker） 标记位，常用于帧的边界（比如视频关键帧） 4. RTP在视频会议中的作用 传输压缩编码后的视频帧/音频帧 保证数据有序（靠Sequence Number），时间同步（靠Timestamp） 可配合FEC、NACK、PLC做丢包处理 可与SRTP（Secure RTP）配合加密 二、RTCP（RTP Control Protocol） 1. 基本概念 RTCP是RTP的伴侣协议，用来传输控制信息，不是媒体数据。\n2. RTCP功能 反馈网络状态\n丢包率、延迟、抖动 提供带宽估计依据（BWE） 统计信息\n发送者/接收者的发送包数、接收字节数等 音视频同步\n通过NTP + RTP时间戳进行跨流同步（音频与视频） 参与者标识\n包含CNAME、SSRC等标识符 3. RTCP包类型 RTCP包类型 描述 SR（Sender Report） 发送端报告，包含发送时间、RTP时间戳、发送字节/包数等 RR（Receiver Report） 接收端报告，反馈丢包率、抖动、延迟等 SDES（Source Description） 提供流的描述信息（比如CNAME） BYE 表示离开会议的通知 APP 应用层扩展自定义数据 4. RTCP报告字段 字段 含义 fraction_lost 丢包比例 cumulative_lost 丢失包总数 jitter 抖动值 last_sr 上一次接收到的SR delay_since_last_sr 与SR的延迟（用于RTT计算） 三、RTP/RTCP协作机制 1. 基本流程 ┌──────────────┐ RTP媒体流 ┌──────────────┐ │ 发送端（A） │ ────────────▶ │ 接收端（B） │ └──────────────┘ └──────────────┘ ▲ │ │ RTCP SR（发送统计） ▼ │◀─────────────── RTCP RR（反馈统计） 2. 典型应用场景 应用场景 RTP/RTCP作用 视频通话 RTP发送视频帧，RTCP控制延迟、丢包反馈 音频会议 RTP发送音频帧，RTCP调整码率 视频同步音频 RTCP的时间戳同步，确保音视频同步播放 四、技术细节 1. 时间戳机制 $$ \\text{RTP时间戳} = \\text{采样时钟频率} \\times \\text{采样时间} $$\n2. 丢包检测 $$ \\text{丢包率} = \\frac{\\text{预期包数} - \\text{实际接收包数}}{\\text{预期包数}} $$\n3. 抖动计算 $$ \\text{抖动} = \\sqrt{\\frac{\\sum_{i=1}^{n} (D_i - D_{i-1})^2}{n}} $$ 其中：\n$D_i$ 是第i个包的延迟 $n$ 是样本数量 五、安全考虑 1. SRTP（Secure RTP） 提供加密 消息认证 重放保护 2. 安全配置 参数 说明 加密算法 AES-128-GCM 认证算法 HMAC-SHA1 密钥管理 DTLS-SRTP 六、性能优化 1. 带宽估计 基于RTCP反馈 自适应码率控制 拥塞控制 2. 丢包恢复 FEC（前向纠错） NACK（否定确认） PLC（丢包隐藏） 3. 延迟控制 缓冲区管理 动态调整 优先级处理 七、实际应用 1. WebRTC中的应用 媒体传输 网络状态监控 自适应控制 2. 视频会议系统 多路流管理 质量监控 带宽控制 3. 流媒体服务 直播传输 点播服务 CDN分发 八、最佳实践 1. 配置建议 RTCP间隔：5秒 缓冲区大小：根据网络状况动态调整 加密：始终启用SRTP 2. 监控指标 丢包率 延迟 抖动 带宽使用率 3. 故障处理 网络拥塞检测 自动重连机制 降级策略 九、总结 1. 协议对比 协议 作用 是否承载媒体 RTP 传输媒体（音频/视频） ✅ 是 RTCP 网络反馈、统计、同步 ❌ 否 2. 关键特性 实时性 可扩展性 安全性 可靠性 3. 应用价值 实时通信 流媒体传输 视频会议 在线教育 参考文献：\n“RTP: Audio and Video for the Internet” by Colin Perkins “Real-Time Communication with WebRTC” by Salvatore Loreto “WebRTC: APIs and RTCWeb Protocols” by Alan B. Johnston “Internetworking with TCP/IP” by Douglas E. Comer “Computer Networks” by Andrew S. Tanenbaum “Network Security” by William Stallings “Multimedia Communications” by Fred Halsall “Digital Video and Audio Broadcasting” by Walter Fischer “Streaming Media” by Geoff Huston “The WebRTC Book” by Alan B. Johnston ","wordCount":"393","inLanguage":"en","datePublished":"2024-04-22T00:00:00Z","dateModified":"2024-04-22T00:00:00Z","author":{"@type":"Person","name":"徐亚飞"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://xuyafei.github.io/personal-site/posts/rtp_rtcp_protocol/"},"publisher":{"@type":"Organization","name":"我的博客","logo":{"@type":"ImageObject","url":"https://xuyafei.github.io/personal-site/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://xuyafei.github.io/personal-site/ accesskey=h title="我的博客 (Alt + H)">我的博客</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://xuyafei.github.io/personal-site/categories/ title=分类><span>分类</span></a></li><li><a href=https://xuyafei.github.io/personal-site/tags/ title=标签><span>标签</span></a></li><li><a href=https://xuyafei.github.io/personal-site/archives/ title=归档><span>归档</span></a></li><li><a href=https://xuyafei.github.io/personal-site/search/ title=搜索><span>搜索</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://xuyafei.github.io/personal-site/>Home</a>&nbsp;»&nbsp;<a href=https://xuyafei.github.io/personal-site/posts/>文章</a></div><h1 class="post-title entry-hint-parent">RTP/RTCP协议详解</h1><div class=post-description>深入解析RTP和RTCP协议的原理、结构及应用，包括其在实时音视频传输中的关键作用</div><div class=post-meta><span title='2024-04-22 00:00:00 +0000 UTC'>April 22, 2024</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;徐亚飞</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#rtprtcp%e5%8d%8f%e8%ae%ae%e8%af%a6%e8%a7%a3 aria-label=RTP/RTCP协议详解>RTP/RTCP协议详解</a><ul><li><a href=#%e4%b8%80rtpreal-time-transport-protocol aria-label="一、RTP（Real-time Transport Protocol）">一、RTP（Real-time Transport Protocol）</a><ul><li><a href=#1-%e5%9f%ba%e6%9c%ac%e6%a6%82%e5%bf%b5 aria-label="1. 基本概念">1. 基本概念</a></li><li><a href=#2-rtp%e5%8c%85%e7%bb%93%e6%9e%84 aria-label="2. RTP包结构">2. RTP包结构</a></li><li><a href=#3-rtp%e6%8a%a5%e6%96%87%e7%bb%93%e6%9e%84 aria-label="3. RTP报文结构">3. RTP报文结构</a><ul><li><a href=#%e5%85%b3%e9%94%ae%e5%ad%97%e6%ae%b5%e8%a7%a3%e9%87%8a aria-label=关键字段解释>关键字段解释</a></li></ul></li><li><a href=#4-rtp%e5%9c%a8%e8%a7%86%e9%a2%91%e4%bc%9a%e8%ae%ae%e4%b8%ad%e7%9a%84%e4%bd%9c%e7%94%a8 aria-label="4. RTP在视频会议中的作用">4. RTP在视频会议中的作用</a></li></ul></li><li><a href=#%e4%ba%8crtcprtp-control-protocol aria-label="二、RTCP（RTP Control Protocol）">二、RTCP（RTP Control Protocol）</a><ul><li><a href=#1-%e5%9f%ba%e6%9c%ac%e6%a6%82%e5%bf%b5-1 aria-label="1. 基本概念">1. 基本概念</a></li><li><a href=#2-rtcp%e5%8a%9f%e8%83%bd aria-label="2. RTCP功能">2. RTCP功能</a></li><li><a href=#3-rtcp%e5%8c%85%e7%b1%bb%e5%9e%8b aria-label="3. RTCP包类型">3. RTCP包类型</a></li><li><a href=#4-rtcp%e6%8a%a5%e5%91%8a%e5%ad%97%e6%ae%b5 aria-label="4. RTCP报告字段">4. RTCP报告字段</a></li></ul></li><li><a href=#%e4%b8%89rtprtcp%e5%8d%8f%e4%bd%9c%e6%9c%ba%e5%88%b6 aria-label=三、RTP/RTCP协作机制>三、RTP/RTCP协作机制</a><ul><li><a href=#1-%e5%9f%ba%e6%9c%ac%e6%b5%81%e7%a8%8b aria-label="1. 基本流程">1. 基本流程</a></li><li><a href=#2-%e5%85%b8%e5%9e%8b%e5%ba%94%e7%94%a8%e5%9c%ba%e6%99%af aria-label="2. 典型应用场景">2. 典型应用场景</a></li></ul></li><li><a href=#%e5%9b%9b%e6%8a%80%e6%9c%af%e7%bb%86%e8%8a%82 aria-label=四、技术细节>四、技术细节</a><ul><li><a href=#1-%e6%97%b6%e9%97%b4%e6%88%b3%e6%9c%ba%e5%88%b6 aria-label="1. 时间戳机制">1. 时间戳机制</a></li><li><a href=#2-%e4%b8%a2%e5%8c%85%e6%a3%80%e6%b5%8b aria-label="2. 丢包检测">2. 丢包检测</a></li><li><a href=#3-%e6%8a%96%e5%8a%a8%e8%ae%a1%e7%ae%97 aria-label="3. 抖动计算">3. 抖动计算</a></li></ul></li><li><a href=#%e4%ba%94%e5%ae%89%e5%85%a8%e8%80%83%e8%99%91 aria-label=五、安全考虑>五、安全考虑</a><ul><li><a href=#1-srtpsecure-rtp aria-label="1. SRTP（Secure RTP）">1. SRTP（Secure RTP）</a></li><li><a href=#2-%e5%ae%89%e5%85%a8%e9%85%8d%e7%bd%ae aria-label="2. 安全配置">2. 安全配置</a></li></ul></li><li><a href=#%e5%85%ad%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96 aria-label=六、性能优化>六、性能优化</a><ul><li><a href=#1-%e5%b8%a6%e5%ae%bd%e4%bc%b0%e8%ae%a1 aria-label="1. 带宽估计">1. 带宽估计</a></li><li><a href=#2-%e4%b8%a2%e5%8c%85%e6%81%a2%e5%a4%8d aria-label="2. 丢包恢复">2. 丢包恢复</a></li><li><a href=#3-%e5%bb%b6%e8%bf%9f%e6%8e%a7%e5%88%b6 aria-label="3. 延迟控制">3. 延迟控制</a></li></ul></li><li><a href=#%e4%b8%83%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8 aria-label=七、实际应用>七、实际应用</a><ul><li><a href=#1-webrtc%e4%b8%ad%e7%9a%84%e5%ba%94%e7%94%a8 aria-label="1. WebRTC中的应用">1. WebRTC中的应用</a></li><li><a href=#2-%e8%a7%86%e9%a2%91%e4%bc%9a%e8%ae%ae%e7%b3%bb%e7%bb%9f aria-label="2. 视频会议系统">2. 视频会议系统</a></li><li><a href=#3-%e6%b5%81%e5%aa%92%e4%bd%93%e6%9c%8d%e5%8a%a1 aria-label="3. 流媒体服务">3. 流媒体服务</a></li></ul></li><li><a href=#%e5%85%ab%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5 aria-label=八、最佳实践>八、最佳实践</a><ul><li><a href=#1-%e9%85%8d%e7%bd%ae%e5%bb%ba%e8%ae%ae aria-label="1. 配置建议">1. 配置建议</a></li><li><a href=#2-%e7%9b%91%e6%8e%a7%e6%8c%87%e6%a0%87 aria-label="2. 监控指标">2. 监控指标</a></li><li><a href=#3-%e6%95%85%e9%9a%9c%e5%a4%84%e7%90%86 aria-label="3. 故障处理">3. 故障处理</a></li></ul></li><li><a href=#%e4%b9%9d%e6%80%bb%e7%bb%93 aria-label=九、总结>九、总结</a><ul><li><a href=#1-%e5%8d%8f%e8%ae%ae%e5%af%b9%e6%af%94 aria-label="1. 协议对比">1. 协议对比</a></li><li><a href=#2-%e5%85%b3%e9%94%ae%e7%89%b9%e6%80%a7 aria-label="2. 关键特性">2. 关键特性</a></li><li><a href=#3-%e5%ba%94%e7%94%a8%e4%bb%b7%e5%80%bc aria-label="3. 应用价值">3. 应用价值</a></li></ul></li></ul></li></ul></div></details></div><div class=post-content><h1 id=rtprtcp协议详解>RTP/RTCP协议详解<a hidden class=anchor aria-hidden=true href=#rtprtcp协议详解>#</a></h1><h2 id=一rtpreal-time-transport-protocol>一、RTP（Real-time Transport Protocol）<a hidden class=anchor aria-hidden=true href=#一rtpreal-time-transport-protocol>#</a></h2><h3 id=1-基本概念>1. 基本概念<a hidden class=anchor aria-hidden=true href=#1-基本概念>#</a></h3><p>RTP是一种用于实时音视频数据传输的协议：</p><ul><li>用于实时音视频数据的传输（例如：H.264视频、Opus音频）</li><li>基于UDP，具备低延迟特性</li><li>不保证传输可靠性（不重传），但设计了时序和同步机制</li></ul><h3 id=2-rtp包结构>2. RTP包结构<a hidden class=anchor aria-hidden=true href=#2-rtp包结构>#</a></h3><p>RTP包包含以下关键字段：</p><ul><li>序列号：用于丢包检测、顺序恢复</li><li>时间戳：标记数据帧时间，供同步播放</li><li>SSRC：同步源标识（每路音视频流唯一）</li></ul><h3 id=3-rtp报文结构>3. RTP报文结构<a hidden class=anchor aria-hidden=true href=#3-rtp报文结构>#</a></h3><pre tabindex=0><code>0                   1                   2                   3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|V=2|P|X| CC |M|     PT        |       sequence number         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                           timestamp                           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           synchronization source (SSRC) identifier            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|            contributing source (CSRC) identifiers             | (optional)
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Payload (媒体数据)                     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</code></pre><h4 id=关键字段解释>关键字段解释<a hidden class=anchor aria-hidden=true href=#关键字段解释>#</a></h4><table><thead><tr><th>字段</th><th>含义</th></tr></thead><tbody><tr><td>Version</td><td>RTP版本号，目前是2</td></tr><tr><td>Sequence Number</td><td>包的序列号，接收端用它来检测丢包</td></tr><tr><td>Timestamp</td><td>当前帧的时间戳，用于播放同步</td></tr><tr><td>SSRC</td><td>同步源标识符，区分不同的流</td></tr><tr><td>PT（Payload Type）</td><td>表示负载类型（比如96表示H264，111表示Opus）</td></tr><tr><td>M（Marker）</td><td>标记位，常用于帧的边界（比如视频关键帧）</td></tr></tbody></table><h3 id=4-rtp在视频会议中的作用>4. RTP在视频会议中的作用<a hidden class=anchor aria-hidden=true href=#4-rtp在视频会议中的作用>#</a></h3><ul><li>传输压缩编码后的视频帧/音频帧</li><li>保证数据有序（靠Sequence Number），时间同步（靠Timestamp）</li><li>可配合FEC、NACK、PLC做丢包处理</li><li>可与SRTP（Secure RTP）配合加密</li></ul><h2 id=二rtcprtp-control-protocol>二、RTCP（RTP Control Protocol）<a hidden class=anchor aria-hidden=true href=#二rtcprtp-control-protocol>#</a></h2><h3 id=1-基本概念-1>1. 基本概念<a hidden class=anchor aria-hidden=true href=#1-基本概念-1>#</a></h3><p>RTCP是RTP的伴侣协议，用来传输控制信息，不是媒体数据。</p><h3 id=2-rtcp功能>2. RTCP功能<a hidden class=anchor aria-hidden=true href=#2-rtcp功能>#</a></h3><ol><li><p><strong>反馈网络状态</strong></p><ul><li>丢包率、延迟、抖动</li><li>提供带宽估计依据（BWE）</li></ul></li><li><p><strong>统计信息</strong></p><ul><li>发送者/接收者的发送包数、接收字节数等</li></ul></li><li><p><strong>音视频同步</strong></p><ul><li>通过NTP + RTP时间戳进行跨流同步（音频与视频）</li></ul></li><li><p><strong>参与者标识</strong></p><ul><li>包含CNAME、SSRC等标识符</li></ul></li></ol><h3 id=3-rtcp包类型>3. RTCP包类型<a hidden class=anchor aria-hidden=true href=#3-rtcp包类型>#</a></h3><table><thead><tr><th>RTCP包类型</th><th>描述</th></tr></thead><tbody><tr><td>SR（Sender Report）</td><td>发送端报告，包含发送时间、RTP时间戳、发送字节/包数等</td></tr><tr><td>RR（Receiver Report）</td><td>接收端报告，反馈丢包率、抖动、延迟等</td></tr><tr><td>SDES（Source Description）</td><td>提供流的描述信息（比如CNAME）</td></tr><tr><td>BYE</td><td>表示离开会议的通知</td></tr><tr><td>APP</td><td>应用层扩展自定义数据</td></tr></tbody></table><h3 id=4-rtcp报告字段>4. RTCP报告字段<a hidden class=anchor aria-hidden=true href=#4-rtcp报告字段>#</a></h3><table><thead><tr><th>字段</th><th>含义</th></tr></thead><tbody><tr><td>fraction_lost</td><td>丢包比例</td></tr><tr><td>cumulative_lost</td><td>丢失包总数</td></tr><tr><td>jitter</td><td>抖动值</td></tr><tr><td>last_sr</td><td>上一次接收到的SR</td></tr><tr><td>delay_since_last_sr</td><td>与SR的延迟（用于RTT计算）</td></tr></tbody></table><h2 id=三rtprtcp协作机制>三、RTP/RTCP协作机制<a hidden class=anchor aria-hidden=true href=#三rtprtcp协作机制>#</a></h2><h3 id=1-基本流程>1. 基本流程<a hidden class=anchor aria-hidden=true href=#1-基本流程>#</a></h3><pre tabindex=0><code>┌──────────────┐   RTP媒体流   ┌──────────────┐
│  发送端（A） │ ────────────▶ │  接收端（B） │
└──────────────┘               └──────────────┘
        ▲                              │
        │ RTCP SR（发送统计）          ▼
        │◀───────────────  RTCP RR（反馈统计）
</code></pre><h3 id=2-典型应用场景>2. 典型应用场景<a hidden class=anchor aria-hidden=true href=#2-典型应用场景>#</a></h3><table><thead><tr><th>应用场景</th><th>RTP/RTCP作用</th></tr></thead><tbody><tr><td>视频通话</td><td>RTP发送视频帧，RTCP控制延迟、丢包反馈</td></tr><tr><td>音频会议</td><td>RTP发送音频帧，RTCP调整码率</td></tr><tr><td>视频同步音频</td><td>RTCP的时间戳同步，确保音视频同步播放</td></tr></tbody></table><h2 id=四技术细节>四、技术细节<a hidden class=anchor aria-hidden=true href=#四技术细节>#</a></h2><h3 id=1-时间戳机制>1. 时间戳机制<a hidden class=anchor aria-hidden=true href=#1-时间戳机制>#</a></h3><p>$$
\text{RTP时间戳} = \text{采样时钟频率} \times \text{采样时间}
$$</p><h3 id=2-丢包检测>2. 丢包检测<a hidden class=anchor aria-hidden=true href=#2-丢包检测>#</a></h3><p>$$
\text{丢包率} = \frac{\text{预期包数} - \text{实际接收包数}}{\text{预期包数}}
$$</p><h3 id=3-抖动计算>3. 抖动计算<a hidden class=anchor aria-hidden=true href=#3-抖动计算>#</a></h3><p>$$
\text{抖动} = \sqrt{\frac{\sum_{i=1}^{n} (D_i - D_{i-1})^2}{n}}
$$
其中：</p><ul><li>$D_i$ 是第i个包的延迟</li><li>$n$ 是样本数量</li></ul><h2 id=五安全考虑>五、安全考虑<a hidden class=anchor aria-hidden=true href=#五安全考虑>#</a></h2><h3 id=1-srtpsecure-rtp>1. SRTP（Secure RTP）<a hidden class=anchor aria-hidden=true href=#1-srtpsecure-rtp>#</a></h3><ul><li>提供加密</li><li>消息认证</li><li>重放保护</li></ul><h3 id=2-安全配置>2. 安全配置<a hidden class=anchor aria-hidden=true href=#2-安全配置>#</a></h3><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>加密算法</td><td>AES-128-GCM</td></tr><tr><td>认证算法</td><td>HMAC-SHA1</td></tr><tr><td>密钥管理</td><td>DTLS-SRTP</td></tr></tbody></table><h2 id=六性能优化>六、性能优化<a hidden class=anchor aria-hidden=true href=#六性能优化>#</a></h2><h3 id=1-带宽估计>1. 带宽估计<a hidden class=anchor aria-hidden=true href=#1-带宽估计>#</a></h3><ul><li>基于RTCP反馈</li><li>自适应码率控制</li><li>拥塞控制</li></ul><h3 id=2-丢包恢复>2. 丢包恢复<a hidden class=anchor aria-hidden=true href=#2-丢包恢复>#</a></h3><ul><li>FEC（前向纠错）</li><li>NACK（否定确认）</li><li>PLC（丢包隐藏）</li></ul><h3 id=3-延迟控制>3. 延迟控制<a hidden class=anchor aria-hidden=true href=#3-延迟控制>#</a></h3><ul><li>缓冲区管理</li><li>动态调整</li><li>优先级处理</li></ul><h2 id=七实际应用>七、实际应用<a hidden class=anchor aria-hidden=true href=#七实际应用>#</a></h2><h3 id=1-webrtc中的应用>1. WebRTC中的应用<a hidden class=anchor aria-hidden=true href=#1-webrtc中的应用>#</a></h3><ul><li>媒体传输</li><li>网络状态监控</li><li>自适应控制</li></ul><h3 id=2-视频会议系统>2. 视频会议系统<a hidden class=anchor aria-hidden=true href=#2-视频会议系统>#</a></h3><ul><li>多路流管理</li><li>质量监控</li><li>带宽控制</li></ul><h3 id=3-流媒体服务>3. 流媒体服务<a hidden class=anchor aria-hidden=true href=#3-流媒体服务>#</a></h3><ul><li>直播传输</li><li>点播服务</li><li>CDN分发</li></ul><h2 id=八最佳实践>八、最佳实践<a hidden class=anchor aria-hidden=true href=#八最佳实践>#</a></h2><h3 id=1-配置建议>1. 配置建议<a hidden class=anchor aria-hidden=true href=#1-配置建议>#</a></h3><ul><li>RTCP间隔：5秒</li><li>缓冲区大小：根据网络状况动态调整</li><li>加密：始终启用SRTP</li></ul><h3 id=2-监控指标>2. 监控指标<a hidden class=anchor aria-hidden=true href=#2-监控指标>#</a></h3><ul><li>丢包率</li><li>延迟</li><li>抖动</li><li>带宽使用率</li></ul><h3 id=3-故障处理>3. 故障处理<a hidden class=anchor aria-hidden=true href=#3-故障处理>#</a></h3><ul><li>网络拥塞检测</li><li>自动重连机制</li><li>降级策略</li></ul><h2 id=九总结>九、总结<a hidden class=anchor aria-hidden=true href=#九总结>#</a></h2><h3 id=1-协议对比>1. 协议对比<a hidden class=anchor aria-hidden=true href=#1-协议对比>#</a></h3><table><thead><tr><th>协议</th><th>作用</th><th>是否承载媒体</th></tr></thead><tbody><tr><td>RTP</td><td>传输媒体（音频/视频）</td><td>✅ 是</td></tr><tr><td>RTCP</td><td>网络反馈、统计、同步</td><td>❌ 否</td></tr></tbody></table><h3 id=2-关键特性>2. 关键特性<a hidden class=anchor aria-hidden=true href=#2-关键特性>#</a></h3><ul><li>实时性</li><li>可扩展性</li><li>安全性</li><li>可靠性</li></ul><h3 id=3-应用价值>3. 应用价值<a hidden class=anchor aria-hidden=true href=#3-应用价值>#</a></h3><ul><li>实时通信</li><li>流媒体传输</li><li>视频会议</li><li>在线教育</li></ul><hr><p><em>参考文献：</em></p><ol><li>&ldquo;RTP: Audio and Video for the Internet&rdquo; by Colin Perkins</li><li>&ldquo;Real-Time Communication with WebRTC&rdquo; by Salvatore Loreto</li><li>&ldquo;WebRTC: APIs and RTCWeb Protocols&rdquo; by Alan B. Johnston</li><li>&ldquo;Internetworking with TCP/IP&rdquo; by Douglas E. Comer</li><li>&ldquo;Computer Networks&rdquo; by Andrew S. Tanenbaum</li><li>&ldquo;Network Security&rdquo; by William Stallings</li><li>&ldquo;Multimedia Communications&rdquo; by Fred Halsall</li><li>&ldquo;Digital Video and Audio Broadcasting&rdquo; by Walter Fischer</li><li>&ldquo;Streaming Media&rdquo; by Geoff Huston</li><li>&ldquo;The WebRTC Book&rdquo; by Alan B. Johnston</li></ol></div><footer class=post-footer><ul class=post-tags><li><a href=https://xuyafei.github.io/personal-site/tags/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/>网络协议</a></li><li><a href=https://xuyafei.github.io/personal-site/tags/rtp/>RTP</a></li><li><a href=https://xuyafei.github.io/personal-site/tags/rtcp/>RTCP</a></li><li><a href=https://xuyafei.github.io/personal-site/tags/%E5%AE%9E%E6%97%B6%E4%BC%A0%E8%BE%93/>实时传输</a></li><li><a href=https://xuyafei.github.io/personal-site/tags/%E9%9F%B3%E8%A7%86%E9%A2%91%E4%BC%A0%E8%BE%93/>音视频传输</a></li><li><a href=https://xuyafei.github.io/personal-site/tags/webrtc/>WebRTC</a></li></ul><nav class=paginav><a class=prev href=https://xuyafei.github.io/personal-site/posts/audio_sampling_bitrate/><span class=title>« Prev</span><br><span>音频采样率与码率详解</span>
</a><a class=next href=https://xuyafei.github.io/personal-site/posts/quantitative_trading_day9/><span class=title>Next »</span><br><span>量化交易入门指南：第9天 - 多因子选股模型（Factor Investing）</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share RTP/RTCP协议详解 on x" href="https://x.com/intent/tweet/?text=RTP%2fRTCP%e5%8d%8f%e8%ae%ae%e8%af%a6%e8%a7%a3&amp;url=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2frtp_rtcp_protocol%2f&amp;hashtags=%e7%bd%91%e7%bb%9c%e5%8d%8f%e8%ae%ae%2cRTP%2cRTCP%2c%e5%ae%9e%e6%97%b6%e4%bc%a0%e8%be%93%2c%e9%9f%b3%e8%a7%86%e9%a2%91%e4%bc%a0%e8%be%93%2cWebRTC"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share RTP/RTCP协议详解 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2frtp_rtcp_protocol%2f&amp;title=RTP%2fRTCP%e5%8d%8f%e8%ae%ae%e8%af%a6%e8%a7%a3&amp;summary=RTP%2fRTCP%e5%8d%8f%e8%ae%ae%e8%af%a6%e8%a7%a3&amp;source=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2frtp_rtcp_protocol%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share RTP/RTCP协议详解 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2frtp_rtcp_protocol%2f&title=RTP%2fRTCP%e5%8d%8f%e8%ae%ae%e8%af%a6%e8%a7%a3"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share RTP/RTCP协议详解 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2frtp_rtcp_protocol%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share RTP/RTCP协议详解 on whatsapp" href="https://api.whatsapp.com/send?text=RTP%2fRTCP%e5%8d%8f%e8%ae%ae%e8%af%a6%e8%a7%a3%20-%20https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2frtp_rtcp_protocol%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share RTP/RTCP协议详解 on telegram" href="https://telegram.me/share/url?text=RTP%2fRTCP%e5%8d%8f%e8%ae%ae%e8%af%a6%e8%a7%a3&amp;url=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2frtp_rtcp_protocol%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share RTP/RTCP协议详解 on ycombinator" href="https://news.ycombinator.com/submitlink?t=RTP%2fRTCP%e5%8d%8f%e8%ae%ae%e8%af%a6%e8%a7%a3&u=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2frtp_rtcp_protocol%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://xuyafei.github.io/personal-site/>我的博客</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>
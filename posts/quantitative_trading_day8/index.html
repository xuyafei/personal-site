<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>量化交易入门指南：第8天 资产配置与均值-方差理论（Mean-Variance Theory） | 我的博客</title><meta name=keywords content="投资组合,量化投资,风险管理,资产配置"><meta name=description content="深入理解现代投资组合理论的核心 - 均值-方差理论，包括投资组合收益与风险的数学表示、协方差与波动性、Markowitz有效前沿等核心概念"><meta name=author content="徐亚飞"><link rel=canonical href=https://xuyafei.github.io/personal-site/posts/quantitative_trading_day8/><link crossorigin=anonymous href=/personal-site/assets/css/stylesheet.93f625d739f1d6a5c6f20c146bc6a8d26b233492b34b2220c54b12fd46a04ded.css integrity="sha256-k/Yl1znx1qXG8gwUa8ao0msjNJKzSyIgxUsS/UagTe0=" rel="preload stylesheet" as=style><link rel=icon href=https://xuyafei.github.io/personal-site/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://xuyafei.github.io/personal-site/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://xuyafei.github.io/personal-site/favicon-32x32.png><link rel=apple-touch-icon href=https://xuyafei.github.io/personal-site/apple-touch-icon.png><link rel=mask-icon href=https://xuyafei.github.io/personal-site/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://xuyafei.github.io/personal-site/posts/quantitative_trading_day8/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAYQHy+K8nqKdr1EzvFzSQC+TAXx6gNQgoRxKtj+P9vvCCQTRWiV crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\[",right:"\\]",display:!0},{left:"\\(",right:"\\)",display:!1}],throwOnError:!1})})</script><script>MathJax={tex:{inlineMath:[["$","$"]],displayMath:[["$$","$$"]],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}}</script><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><meta property="og:url" content="https://xuyafei.github.io/personal-site/posts/quantitative_trading_day8/"><meta property="og:site_name" content="我的博客"><meta property="og:title" content="量化交易入门指南：第8天 资产配置与均值-方差理论（Mean-Variance Theory）"><meta property="og:description" content="深入理解现代投资组合理论的核心 - 均值-方差理论，包括投资组合收益与风险的数学表示、协方差与波动性、Markowitz有效前沿等核心概念"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-06-09T00:00:00+00:00"><meta property="article:modified_time" content="2025-06-09T00:00:00+00:00"><meta property="article:tag" content="投资组合"><meta property="article:tag" content="量化投资"><meta property="article:tag" content="风险管理"><meta property="article:tag" content="资产配置"><meta name=twitter:card content="summary"><meta name=twitter:title content="量化交易入门指南：第8天 资产配置与均值-方差理论（Mean-Variance Theory）"><meta name=twitter:description content="深入理解现代投资组合理论的核心 - 均值-方差理论，包括投资组合收益与风险的数学表示、协方差与波动性、Markowitz有效前沿等核心概念"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"文章","item":"https://xuyafei.github.io/personal-site/posts/"},{"@type":"ListItem","position":2,"name":"量化交易入门指南：第8天 资产配置与均值-方差理论（Mean-Variance Theory）","item":"https://xuyafei.github.io/personal-site/posts/quantitative_trading_day8/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"量化交易入门指南：第8天 资产配置与均值-方差理论（Mean-Variance Theory）","name":"量化交易入门指南：第8天 资产配置与均值-方差理论（Mean-Variance Theory）","description":"深入理解现代投资组合理论的核心 - 均值-方差理论，包括投资组合收益与风险的数学表示、协方差与波动性、Markowitz有效前沿等核心概念","keywords":["投资组合","量化投资","风险管理","资产配置"],"articleBody":"资产配置与均值-方差理论（Mean-Variance Theory） 这是现代投资组合理论的核心。它不仅是基金经理配置资产的基础，也是量化多资产策略、ETF构建、风险平衡策略（如风险平价）等模型的出发点。\n学习目标 理解以下核心内容：\n投资组合收益与风险的数学表示 投资组合的协方差与波动性 Markowitz 均值-方差理论（有效前沿） 无风险资产的引入 \u0026 最优资产配置线（CAL） Python 代码实践（手动或附带代码） 理论学习 1.组合收益和风险如何计算？ 假设你有两个资产 A, B，权重分别为 $w_A$, $w_B$，期望收益为 $E[R_A]$, $E[R_B]$，波动率为 $\\sigma_A$, $\\sigma_B$，协方差为 $\\text{Cov}(A,B)$\n组合预期收益：\n$$E[R_p] = w_A E[R_A] + w_B E[R_B]$$\n组合方差（风险）：\n$$\\sigma_p^2 = w_A^2 \\sigma_A^2 + w_B^2 \\sigma_B^2 + 2w_Aw_B \\cdot \\text{Cov}(A,B)$$\n如果有多个资产（如 n 个），就扩展成协方差矩阵形式：\n$$\\sigma_p^2 = \\mathbf{w}^T \\Sigma \\mathbf{w}$$\n2.组合期望收益是怎么计算的？ “期望是怎么计算的”，意思是：我们怎么得到 $E[R_A]$, $E[R_B]$？\n答案是：基于历史数据或未来预期来估算的。\n例如：\n如果用历史平均： $$E[R_A] = \\frac{1}{T} \\sum_{t=1}^{T} R_{A,t}$$ 其中 $R_{A,t}$ 是第 t 期的实际收益率。 如果是基于分析师预测、基本面判断，可以人为设定一个预期收益。 3.波动率是固定的吗？ 不是\"固定的\"，而是基于一段历史数据估算的，并且会随着数据更新不断变化。\n波动率$\\sigma$本质上是收益率的标准差：\n$$\\sigma_A = \\sqrt{\\frac{1}{T-1} \\sum_{t=1}^{T} \\left(R_{A,t} - E[R_A]\\right)^2}$$\n它衡量的是收益的\"上下波动性\"。 波动越大，风险越高。 注意：波动率是用对数收益率还是线性收益率都可以，但要保持一致。\n4.协方差怎么计算的？ 协方差公式是：\n$$\\text{Cov}(A, B) = \\frac{1}{T-1} \\sum_{t=1}^{T} (R_{A,t} - E[R_A]) (R_{B,t} - E[R_B])$$\n它衡量的是：两个资产收益变动之间的关系 正协方差：同涨同跌 负协方差：一个涨一个跌 协方差 = 0：互不相关 协方差可以换算成\"相关系数\"：\n$$\\rho_{A,B} = \\frac{\\text{Cov}(A,B)}{\\sigma_A \\sigma_B}$$ $$\\quad \\Rightarrow \\quad$$ $$\\text{Cov}(A,B) = \\rho_{A,B} \\cdot \\sigma_A \\cdot \\sigma_B$$\n5.为什么要计算协方差？ 因为协方差是组合风险不可忽略的一部分。\n组合的整体波动不仅取决于每个资产自身的波动，还取决于它们之间是否\"同步波动\"。\n来看下组合方差的公式：\n$$\\sigma_p^2 = w_A^2 \\sigma_A^2 + w_B^2 \\sigma_B^2 + 2w_A w_B \\cdot \\text{Cov}(A,B)$$\n➤ 解释：\n前两项：分别是 A、B 各自的风险。 最后一项：是组合中由于资产之间的联动带来的额外风险或抵消效果。 举例：\n如果两个资产相关性是 -1，你可以组合出几乎\"无波动\"的投资（理论最小方差）。 如果两个资产完全正相关，你的组合波动不会被降低。 所以：\n资产之间的协方差（或相关性）越低，组合分散风险的效果越好。\n这就是\"不要把鸡蛋放在一个篮子里\"的数学基础。\n6.多个资产的协方差矩阵形式 对于多个资产 n，你就不能一个个手工算了，要用矩阵：\n权重向量： $$\\mathbf{w} = \\begin{bmatrix} w_1 \\ w_2 \\ \\vdots \\ w_n \\end{bmatrix}$$ 协方差矩阵： $$\\Sigma = \\begin{bmatrix} \\sigma_1^2 \u0026 \\text{Cov}{1,2} \u0026 \\cdots \u0026 \\text{Cov}{1,n} \\ \\text{Cov}{2,1} \u0026 \\sigma_2^2 \u0026 \\cdots \u0026 \\text{Cov}{2,n} \\ \\vdots \u0026 \\vdots \u0026 \\ddots \u0026 \\vdots \\ \\text{Cov}{n,1} \u0026 \\text{Cov}{n,2} \u0026 \\cdots \u0026 \\sigma_n^2 \\end{bmatrix}$$ 组合方差公式（矩阵形式）： $$\\sigma_p^2 = \\mathbf{w}^T \\Sigma \\mathbf{w}$$ 你可以用 Excel 或 Python numpy 很方便地实现这个计算。\n7.总结一句话 期望收益衡量你希望赚多少，波动率衡量一个资产自身有多不稳定， 协方差衡量资产之间是否\"同时跳动\"， 三者共同决定你的投资组合是否稳健、是否值得投入。\n二、Markowitz 均值-方差理论（Mean-Variance Frontier） 在给定的风险水平下，找到能带来最高期望收益的投资组合 或者在给定收益目标下，找到风险最小的组合\n这就构成了所谓的：\n有效前沿（Efficient Frontier）\n一条向上的\"边界线\"，表示在不同风险水平下最优的资产组合。\n1. 背景与目标：资产组合优化的本质 假设你有多个投资对象（如股票、基金、债券等），你希望在控制风险的前提下，获得尽可能高的收益。\nMarkowitz 的思想核心就是：\n收益越高越好，风险越低越好 但二者存在权衡：收益越高，风险往往越大。\n于是，我们的目标转化为：\n在固定风险水平下，找期望收益最高的组合 或者 在固定收益目标下，找风险最小的组合 2. 可行集合（Feasible Set） 先假设你知道所有资产的：\n期望收益 $E[R_i]$ 风险（标准差） $\\sigma_i$ 两两之间的协方差 $\\text{Cov}(R_i, R_j)$ 你可以通过不同的权重组合 $$\\mathbf{w} = [w_1, w_2, …, w_n]$$ 构造出许多组合，每个组合都有：\n一个期望收益 $$E[R_p] = \\sum w_i E[R_i]$$ 一个组合风险 $$\\sigma_p = \\sqrt{\\mathbf{w}^T \\Sigma \\mathbf{w}}$$ 把所有这些组合画在二维坐标系里（x轴是风险，y轴是收益），你就得到一个\"抛物线形的图\" —— 这叫做可行集合。\n3. 有效前沿（Efficient Frontier） 在这个\"抛物线形区域\"的上边界，就是 Markowitz 所定义的：\n有效前沿（Efficient Frontier）\n它包含了所有在给定风险水平下，期望收益最高的投资组合。\n特点：\n所有有效组合都在这条边界上 边界以下的组合，要么收益低，要么风险高 —— 非最优 这条边界线通常是向上弯曲的（凸的） 4. 最左边的点：最小方差组合（Minimum Variance Portfolio） 在所有组合中，风险（方差）最小的是哪一个？\n就是 有效前沿最左侧的那一点，称为：\nMinimum Variance Portfolio（MVP）\n它的特点是：\n不管你是否追求高收益，它无条件风险最小 通常是分散投资效果最强的组合 有时候收益也不错，但不是最优收益 5. 再引入无风险资产后（Capital Market Line） 如果市场中存在一个无风险资产（如国债），你还可以：\n和有效前沿上的某一点做一条切线 找到一条叫做 资本市场线（CML） 的直线 它的切点就是市场组合（Market Portfolio），夏普比率最大 这是 CAPM 的基础，可以之后扩展讲。\n6. 小结：图像理解 你可以把整个 Markowitz 均值-方差理论理解为：\n收益 ^ | | * ← 高收益但风险高（非有效组合） | * | * | * | * | * |* ← 最小方差组合 MVP（风险最小） +--------------------------\u003e 风险（标准差） *表示有效前沿上的组合 最左边那点风险最低 你选组合的位置，取决于你对风险和收益的偏好（风险厌恶程度） 三、引入无风险资产：资本配置线（CAL） 当你能投资于一个无风险资产（如国债）和一个风险资产组合时：\n整个有效前沿不再是曲线，而变成一条直线 最陡的那条线，即为资本配置线（Capital Allocation Line），斜率就是 Sharpe Ratio 投资组合理论的目标就是找到那条最陡的 CAL，其与有效前沿相切的点，称为：\n最优风险投资组合（Tangency Portfolio）\n1.先回顾：没有无风险资产时的有效前沿 我们已经知道：\n有 n 个风险资产，比如股票、基金等 通过不同的权重组合，构建出各种投资组合 把这些组合在二维坐标系（风险 σ，期望收益 E[R]）上画出来，形成一个\"向上凸的边界曲线\"，那是： 有效前沿（Efficient Frontier）\n2.现在引入一个无风险资产 比如：短期国债，固定收益 3%，标准差为 0（无波动）\n我们现在可以干一件以前不能做的事：\n把\"无风险资产\" 和 “任何风险资产组合” 做加权投资！\n例如：\n投资组合 = 50% 无风险资产（如年化 3%） 50% 风险资产（如股票组合年化 8%，σ = 15%） 那整体组合的：\n预期收益 = 0.5 × 3% + 0.5 × 8% = 5.5% 风险 = 0.5 × 15% = 7.5% （因为无风险资产波动是 0） 注意：风险线性增长，收益也线性增长！ 这说明：你在两个资产间做线性组合，最终结果也落在一条直线上。\n3.这就是\"资本配置线（CAL）\" 如果你：\n把无风险资产当作左端点 另一端是某个风险投资组合 你就可以在这两点之间做任意线性组合（例如 30/70, 60/40 等） 那么：\n所有这些组合就落在一条穿过无风险收益点、延伸到风险资产组合的直线上，这条线就是：\n资本配置线（CAL, Capital Allocation Line）\n4.为什么我们要找\"最陡的\"那条线？ 因为：\n线的斜率 = 单位风险所获得的超额收益 $$\\text{CAL 斜率} = \\frac{E[R_p] - R_f}{\\sigma_p} = \\text{Sharpe Ratio}$$\n所以我们希望这条线尽可能\"陡\"，代表单位波动带来最多收益！ 结论：\n找到和有效前沿\"相切\"的 CAL，就是找到单位风险回报比（Sharpe）最大的投资组合！\n这个切点对应的组合就是：\n切点投资组合（Tangency Portfolio）\n它是所有风险资产中最优的\"基础组合\" 投资者可以根据自己的风险偏好，在这条线上的不同点做组合（加杠杆或持有部分国债） 5.图像理解： 收益 ^ | | * ← 有效前沿（风险资产组合） | * * | * * | * * |*------------------------→ 风险 Rf ↑ \\ | \\ | \\ | ← 资本配置线（CAL） \\ | ← 最优切点组合 \\___________| Rf：无风险资产 CAL：从 Rf 向右画出的那条穿过切点组合的直线 最陡的 CAL → 对应 Sharpe Ratio 最大 6.总结 概念 含义 无风险资产 固定收益、零波动，如国债 资本配置线 CAL 投资组合 = 无风险资产 + 风险组合 CAL 斜率 Sharpe Ratio，单位波动带来的超额收益 切点组合 Sharpe 最大，最优风险投资组合 投资选择 你可以在 CAL 上移动，根据风险承受能力选择组合 ","wordCount":"514","inLanguage":"en","datePublished":"2025-06-09T00:00:00Z","dateModified":"2025-06-09T00:00:00Z","author":{"@type":"Person","name":"徐亚飞"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://xuyafei.github.io/personal-site/posts/quantitative_trading_day8/"},"publisher":{"@type":"Organization","name":"我的博客","logo":{"@type":"ImageObject","url":"https://xuyafei.github.io/personal-site/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://xuyafei.github.io/personal-site/ accesskey=h title="我的博客 (Alt + H)">我的博客</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://xuyafei.github.io/personal-site/categories/ title=分类><span>分类</span></a></li><li><a href=https://xuyafei.github.io/personal-site/tags/ title=标签><span>标签</span></a></li><li><a href=https://xuyafei.github.io/personal-site/archives/ title=归档><span>归档</span></a></li><li><a href=https://xuyafei.github.io/personal-site/search/ title=搜索><span>搜索</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://xuyafei.github.io/personal-site/>Home</a>&nbsp;»&nbsp;<a href=https://xuyafei.github.io/personal-site/posts/>文章</a></div><h1 class="post-title entry-hint-parent">量化交易入门指南：第8天 资产配置与均值-方差理论（Mean-Variance Theory）</h1><div class=post-description>深入理解现代投资组合理论的核心 - 均值-方差理论，包括投资组合收益与风险的数学表示、协方差与波动性、Markowitz有效前沿等核心概念</div><div class=post-meta><span title='2025-06-09 00:00:00 +0000 UTC'>June 9, 2025</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;徐亚飞</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e8%b5%84%e4%ba%a7%e9%85%8d%e7%bd%ae%e4%b8%8e%e5%9d%87%e5%80%bc-%e6%96%b9%e5%b7%ae%e7%90%86%e8%ae%bamean-variance-theory aria-label="资产配置与均值-方差理论（Mean-Variance Theory）">资产配置与均值-方差理论（Mean-Variance Theory）</a><ul><li><a href=#%e5%ad%a6%e4%b9%a0%e7%9b%ae%e6%a0%87 aria-label=学习目标>学习目标</a></li><li><a href=#%e7%90%86%e8%ae%ba%e5%ad%a6%e4%b9%a0 aria-label=理论学习>理论学习</a><ul><li><a href=#1%e7%bb%84%e5%90%88%e6%94%b6%e7%9b%8a%e5%92%8c%e9%a3%8e%e9%99%a9%e5%a6%82%e4%bd%95%e8%ae%a1%e7%ae%97 aria-label=1.组合收益和风险如何计算？>1.组合收益和风险如何计算？</a></li><li><a href=#2%e7%bb%84%e5%90%88%e6%9c%9f%e6%9c%9b%e6%94%b6%e7%9b%8a%e6%98%af%e6%80%8e%e4%b9%88%e8%ae%a1%e7%ae%97%e7%9a%84 aria-label=2.组合期望收益是怎么计算的？>2.组合期望收益是怎么计算的？</a></li><li><a href=#3%e6%b3%a2%e5%8a%a8%e7%8e%87%e6%98%af%e5%9b%ba%e5%ae%9a%e7%9a%84%e5%90%97 aria-label=3.波动率是固定的吗？>3.波动率是固定的吗？</a></li><li><a href=#4%e5%8d%8f%e6%96%b9%e5%b7%ae%e6%80%8e%e4%b9%88%e8%ae%a1%e7%ae%97%e7%9a%84 aria-label=4.协方差怎么计算的？>4.协方差怎么计算的？</a></li><li><a href=#5%e4%b8%ba%e4%bb%80%e4%b9%88%e8%a6%81%e8%ae%a1%e7%ae%97%e5%8d%8f%e6%96%b9%e5%b7%ae aria-label=5.为什么要计算协方差？>5.为什么要计算协方差？</a></li><li><a href=#6%e5%a4%9a%e4%b8%aa%e8%b5%84%e4%ba%a7%e7%9a%84%e5%8d%8f%e6%96%b9%e5%b7%ae%e7%9f%a9%e9%98%b5%e5%bd%a2%e5%bc%8f aria-label=6.多个资产的协方差矩阵形式>6.多个资产的协方差矩阵形式</a></li><li><a href=#7%e6%80%bb%e7%bb%93%e4%b8%80%e5%8f%a5%e8%af%9d aria-label=7.总结一句话>7.总结一句话</a></li></ul></li><li><a href=#%e4%ba%8cmarkowitz-%e5%9d%87%e5%80%bc-%e6%96%b9%e5%b7%ae%e7%90%86%e8%ae%bamean-variance-frontier aria-label="二、Markowitz 均值-方差理论（Mean-Variance Frontier）">二、Markowitz 均值-方差理论（Mean-Variance Frontier）</a><ul><li><a href=#1-%e8%83%8c%e6%99%af%e4%b8%8e%e7%9b%ae%e6%a0%87%e8%b5%84%e4%ba%a7%e7%bb%84%e5%90%88%e4%bc%98%e5%8c%96%e7%9a%84%e6%9c%ac%e8%b4%a8 aria-label="1. 背景与目标：资产组合优化的本质">1. 背景与目标：资产组合优化的本质</a></li><li><a href=#2-%e5%8f%af%e8%a1%8c%e9%9b%86%e5%90%88feasible-set aria-label="2. 可行集合（Feasible Set）">2. 可行集合（Feasible Set）</a></li><li><a href=#3-%e6%9c%89%e6%95%88%e5%89%8d%e6%b2%bfefficient-frontier aria-label="3. 有效前沿（Efficient Frontier）">3. 有效前沿（Efficient Frontier）</a></li><li><a href=#4-%e6%9c%80%e5%b7%a6%e8%be%b9%e7%9a%84%e7%82%b9%e6%9c%80%e5%b0%8f%e6%96%b9%e5%b7%ae%e7%bb%84%e5%90%88minimum-variance-portfolio aria-label="4. 最左边的点：最小方差组合（Minimum Variance Portfolio）">4. 最左边的点：最小方差组合（Minimum Variance Portfolio）</a></li><li><a href=#5-%e5%86%8d%e5%bc%95%e5%85%a5%e6%97%a0%e9%a3%8e%e9%99%a9%e8%b5%84%e4%ba%a7%e5%90%8ecapital-market-line aria-label="5. 再引入无风险资产后（Capital Market Line）">5. 再引入无风险资产后（Capital Market Line）</a></li><li><a href=#6-%e5%b0%8f%e7%bb%93%e5%9b%be%e5%83%8f%e7%90%86%e8%a7%a3 aria-label="6. 小结：图像理解">6. 小结：图像理解</a></li></ul></li><li><a href=#%e4%b8%89%e5%bc%95%e5%85%a5%e6%97%a0%e9%a3%8e%e9%99%a9%e8%b5%84%e4%ba%a7%e8%b5%84%e6%9c%ac%e9%85%8d%e7%bd%ae%e7%ba%bfcal aria-label=三、引入无风险资产：资本配置线（CAL）>三、引入无风险资产：资本配置线（CAL）</a><ul><li><a href=#1%e5%85%88%e5%9b%9e%e9%a1%be%e6%b2%a1%e6%9c%89%e6%97%a0%e9%a3%8e%e9%99%a9%e8%b5%84%e4%ba%a7%e6%97%b6%e7%9a%84%e6%9c%89%e6%95%88%e5%89%8d%e6%b2%bf aria-label=1.先回顾：没有无风险资产时的有效前沿>1.先回顾：没有无风险资产时的有效前沿</a></li><li><a href=#2%e7%8e%b0%e5%9c%a8%e5%bc%95%e5%85%a5%e4%b8%80%e4%b8%aa%e6%97%a0%e9%a3%8e%e9%99%a9%e8%b5%84%e4%ba%a7 aria-label=2.现在引入一个无风险资产>2.现在引入一个无风险资产</a></li><li><a href=#3%e8%bf%99%e5%b0%b1%e6%98%af%e8%b5%84%e6%9c%ac%e9%85%8d%e7%bd%ae%e7%ba%bfcal aria-label='3.这就是"资本配置线（CAL）"'>3.这就是"资本配置线（CAL）"</a></li><li><a href=#4%e4%b8%ba%e4%bb%80%e4%b9%88%e6%88%91%e4%bb%ac%e8%a6%81%e6%89%be%e6%9c%80%e9%99%a1%e7%9a%84%e9%82%a3%e6%9d%a1%e7%ba%bf aria-label='4.为什么我们要找"最陡的"那条线？'>4.为什么我们要找"最陡的"那条线？</a></li><li><a href=#5%e5%9b%be%e5%83%8f%e7%90%86%e8%a7%a3 aria-label=5.图像理解：>5.图像理解：</a></li><li><a href=#6%e6%80%bb%e7%bb%93 aria-label=6.总结>6.总结</a></li></ul></li></ul></li></ul></div></details></div><div class=post-content><h1 id=资产配置与均值-方差理论mean-variance-theory>资产配置与均值-方差理论（Mean-Variance Theory）<a hidden class=anchor aria-hidden=true href=#资产配置与均值-方差理论mean-variance-theory>#</a></h1><p>这是现代投资组合理论的核心。它不仅是基金经理配置资产的基础，也是量化多资产策略、ETF构建、风险平衡策略（如风险平价）等模型的出发点。</p><h2 id=学习目标>学习目标<a hidden class=anchor aria-hidden=true href=#学习目标>#</a></h2><p>理解以下核心内容：</p><ol><li>投资组合收益与风险的数学表示</li><li>投资组合的协方差与波动性</li><li>Markowitz 均值-方差理论（有效前沿）</li><li>无风险资产的引入 & 最优资产配置线（CAL）</li><li>Python 代码实践（手动或附带代码）</li></ol><h2 id=理论学习>理论学习<a hidden class=anchor aria-hidden=true href=#理论学习>#</a></h2><h3 id=1组合收益和风险如何计算>1.组合收益和风险如何计算？<a hidden class=anchor aria-hidden=true href=#1组合收益和风险如何计算>#</a></h3><p>假设你有两个资产 A, B，权重分别为 $w_A$, $w_B$，期望收益为 $E[R_A]$, $E[R_B]$，波动率为 $\sigma_A$, $\sigma_B$，协方差为 $\text{Cov}(A,B)$</p><p>组合预期收益：</p><p>$$E[R_p] = w_A E[R_A] + w_B E[R_B]$$</p><p>组合方差（风险）：</p><p>$$\sigma_p^2 = w_A^2 \sigma_A^2 + w_B^2 \sigma_B^2 + 2w_Aw_B \cdot \text{Cov}(A,B)$$</p><p>如果有多个资产（如 n 个），就扩展成协方差矩阵形式：</p><p>$$\sigma_p^2 = \mathbf{w}^T \Sigma \mathbf{w}$$</p><h3 id=2组合期望收益是怎么计算的>2.组合期望收益是怎么计算的？<a hidden class=anchor aria-hidden=true href=#2组合期望收益是怎么计算的>#</a></h3><p>&ldquo;期望是怎么计算的&rdquo;，意思是：我们怎么得到 $E[R_A]$, $E[R_B]$？</p><p>答案是：基于历史数据或未来预期来估算的。</p><p>例如：</p><ul><li>如果用历史平均：
$$E[R_A] = \frac{1}{T} \sum_{t=1}^{T} R_{A,t}$$
其中 $R_{A,t}$ 是第 t 期的实际收益率。</li><li>如果是基于分析师预测、基本面判断，可以人为设定一个预期收益。</li></ul><h3 id=3波动率是固定的吗>3.波动率是固定的吗？<a hidden class=anchor aria-hidden=true href=#3波动率是固定的吗>#</a></h3><p>不是"固定的"，而是基于一段历史数据估算的，并且会随着数据更新不断变化。</p><p>波动率$\sigma$本质上是收益率的标准差：</p><p>$$\sigma_A = \sqrt{\frac{1}{T-1} \sum_{t=1}^{T} \left(R_{A,t} - E[R_A]\right)^2}$$</p><ul><li>它衡量的是收益的"上下波动性"。</li><li>波动越大，风险越高。</li></ul><p>注意：波动率是用对数收益率还是线性收益率都可以，但要保持一致。</p><h3 id=4协方差怎么计算的>4.协方差怎么计算的？<a hidden class=anchor aria-hidden=true href=#4协方差怎么计算的>#</a></h3><p>协方差公式是：</p><p>$$\text{Cov}(A, B) = \frac{1}{T-1} \sum_{t=1}^{T} (R_{A,t} - E[R_A]) (R_{B,t} - E[R_B])$$</p><ul><li>它衡量的是：两个资产收益变动之间的关系</li><li>正协方差：同涨同跌</li><li>负协方差：一个涨一个跌</li><li>协方差 = 0：互不相关</li></ul><p>协方差可以换算成"相关系数"：</p><p>$$\rho_{A,B} = \frac{\text{Cov}(A,B)}{\sigma_A \sigma_B}$$
$$\quad \Rightarrow \quad$$
$$\text{Cov}(A,B) = \rho_{A,B} \cdot \sigma_A \cdot \sigma_B$$</p><h3 id=5为什么要计算协方差>5.为什么要计算协方差？<a hidden class=anchor aria-hidden=true href=#5为什么要计算协方差>#</a></h3><p>因为协方差是组合风险不可忽略的一部分。</p><p>组合的整体波动不仅取决于每个资产自身的波动，还取决于它们之间是否"同步波动"。</p><p>来看下组合方差的公式：</p><p>$$\sigma_p^2 = w_A^2 \sigma_A^2 + w_B^2 \sigma_B^2 + 2w_A w_B \cdot \text{Cov}(A,B)$$</p><p>➤ 解释：</p><ul><li>前两项：分别是 A、B 各自的风险。</li><li>最后一项：是组合中由于资产之间的联动带来的额外风险或抵消效果。</li></ul><p>举例：</p><ul><li>如果两个资产相关性是 -1，你可以组合出几乎"无波动"的投资（理论最小方差）。</li><li>如果两个资产完全正相关，你的组合波动不会被降低。</li></ul><p>所以：</p><p>资产之间的协方差（或相关性）越低，组合分散风险的效果越好。</p><p>这就是"不要把鸡蛋放在一个篮子里"的数学基础。</p><h3 id=6多个资产的协方差矩阵形式>6.多个资产的协方差矩阵形式<a hidden class=anchor aria-hidden=true href=#6多个资产的协方差矩阵形式>#</a></h3><p>对于多个资产 n，你就不能一个个手工算了，要用矩阵：</p><ul><li>权重向量：
$$\mathbf{w} = \begin{bmatrix} w_1 \ w_2 \ \vdots \ w_n \end{bmatrix}$$</li><li>协方差矩阵：
$$\Sigma =
\begin{bmatrix}
\sigma_1^2 & \text{Cov}{1,2} & \cdots & \text{Cov}{1,n} \
\text{Cov}{2,1} & \sigma_2^2 & \cdots & \text{Cov}{2,n} \
\vdots & \vdots & \ddots & \vdots \
\text{Cov}{n,1} & \text{Cov}{n,2} & \cdots & \sigma_n^2
\end{bmatrix}$$</li><li>组合方差公式（矩阵形式）：
$$\sigma_p^2 = \mathbf{w}^T \Sigma \mathbf{w}$$</li></ul><p>你可以用 Excel 或 Python numpy 很方便地实现这个计算。</p><h3 id=7总结一句话>7.总结一句话<a hidden class=anchor aria-hidden=true href=#7总结一句话>#</a></h3><p>期望收益衡量你希望赚多少，波动率衡量一个资产自身有多不稳定，
协方差衡量资产之间是否"同时跳动"，
三者共同决定你的投资组合是否稳健、是否值得投入。</p><h2 id=二markowitz-均值-方差理论mean-variance-frontier>二、Markowitz 均值-方差理论（Mean-Variance Frontier）<a hidden class=anchor aria-hidden=true href=#二markowitz-均值-方差理论mean-variance-frontier>#</a></h2><p>在给定的风险水平下，找到能带来最高期望收益的投资组合
或者在给定收益目标下，找到风险最小的组合</p><p>这就构成了所谓的：</p><p>有效前沿（Efficient Frontier）</p><p>一条向上的"边界线"，表示在不同风险水平下最优的资产组合。</p><h3 id=1-背景与目标资产组合优化的本质>1. 背景与目标：资产组合优化的本质<a hidden class=anchor aria-hidden=true href=#1-背景与目标资产组合优化的本质>#</a></h3><p>假设你有多个投资对象（如股票、基金、债券等），你希望在控制风险的前提下，获得尽可能高的收益。</p><p>Markowitz 的思想核心就是：</p><p>收益越高越好，风险越低越好
但二者存在权衡：收益越高，风险往往越大。</p><p>于是，我们的目标转化为：</p><ul><li>在固定风险水平下，找期望收益最高的组合</li><li>或者 在固定收益目标下，找风险最小的组合</li></ul><h3 id=2-可行集合feasible-set>2. 可行集合（Feasible Set）<a hidden class=anchor aria-hidden=true href=#2-可行集合feasible-set>#</a></h3><p>先假设你知道所有资产的：</p><ul><li>期望收益 $E[R_i]$</li><li>风险（标准差） $\sigma_i$</li><li>两两之间的协方差 $\text{Cov}(R_i, R_j)$</li></ul><p>你可以通过不同的权重组合 $$\mathbf{w} = [w_1, w_2, …, w_n]$$ 构造出许多组合，每个组合都有：</p><ul><li>一个期望收益 $$E[R_p] = \sum w_i E[R_i]$$</li><li>一个组合风险 $$\sigma_p = \sqrt{\mathbf{w}^T \Sigma \mathbf{w}}$$</li></ul><p>把所有这些组合画在二维坐标系里（x轴是风险，y轴是收益），你就得到一个"抛物线形的图" —— 这叫做可行集合。</p><h3 id=3-有效前沿efficient-frontier>3. 有效前沿（Efficient Frontier）<a hidden class=anchor aria-hidden=true href=#3-有效前沿efficient-frontier>#</a></h3><p>在这个"抛物线形区域"的上边界，就是 Markowitz 所定义的：</p><p>有效前沿（Efficient Frontier）</p><p>它包含了所有在给定风险水平下，期望收益最高的投资组合。</p><p>特点：</p><ul><li>所有有效组合都在这条边界上</li><li>边界以下的组合，要么收益低，要么风险高 —— 非最优</li><li>这条边界线通常是向上弯曲的（凸的）</li></ul><h3 id=4-最左边的点最小方差组合minimum-variance-portfolio>4. 最左边的点：最小方差组合（Minimum Variance Portfolio）<a hidden class=anchor aria-hidden=true href=#4-最左边的点最小方差组合minimum-variance-portfolio>#</a></h3><p>在所有组合中，风险（方差）最小的是哪一个？</p><p>就是 有效前沿最左侧的那一点，称为：</p><p>Minimum Variance Portfolio（MVP）</p><p>它的特点是：</p><ul><li>不管你是否追求高收益，它无条件风险最小</li><li>通常是分散投资效果最强的组合</li><li>有时候收益也不错，但不是最优收益</li></ul><h3 id=5-再引入无风险资产后capital-market-line>5. 再引入无风险资产后（Capital Market Line）<a hidden class=anchor aria-hidden=true href=#5-再引入无风险资产后capital-market-line>#</a></h3><p>如果市场中存在一个无风险资产（如国债），你还可以：</p><ul><li>和有效前沿上的某一点做一条切线</li><li>找到一条叫做 资本市场线（CML） 的直线</li><li>它的切点就是市场组合（Market Portfolio），夏普比率最大</li></ul><p>这是 CAPM 的基础，可以之后扩展讲。</p><h3 id=6-小结图像理解>6. 小结：图像理解<a hidden class=anchor aria-hidden=true href=#6-小结图像理解>#</a></h3><p>你可以把整个 Markowitz 均值-方差理论理解为：</p><pre tabindex=0><code>收益 ^
      |
      |                   *      ← 高收益但风险高（非有效组合）
      |               *
      |            *
      |         *
      |      *
      |   *
      |* ← 最小方差组合 MVP（风险最小）
      +--------------------------&gt; 风险（标准差）
</code></pre><ul><li>*表示有效前沿上的组合</li><li>最左边那点风险最低</li><li>你选组合的位置，取决于你对风险和收益的偏好（风险厌恶程度）</li></ul><h2 id=三引入无风险资产资本配置线cal>三、引入无风险资产：资本配置线（CAL）<a hidden class=anchor aria-hidden=true href=#三引入无风险资产资本配置线cal>#</a></h2><p>当你能投资于一个无风险资产（如国债）和一个风险资产组合时：</p><ul><li>整个有效前沿不再是曲线，而变成一条直线</li><li>最陡的那条线，即为资本配置线（Capital Allocation Line），斜率就是 Sharpe Ratio</li></ul><p>投资组合理论的目标就是找到那条最陡的 CAL，其与有效前沿相切的点，称为：</p><p>最优风险投资组合（Tangency Portfolio）</p><h3 id=1先回顾没有无风险资产时的有效前沿>1.先回顾：没有无风险资产时的有效前沿<a hidden class=anchor aria-hidden=true href=#1先回顾没有无风险资产时的有效前沿>#</a></h3><p>我们已经知道：</p><ul><li>有 n 个风险资产，比如股票、基金等</li><li>通过不同的权重组合，构建出各种投资组合</li><li>把这些组合在二维坐标系（风险 σ，期望收益 E[R]）上画出来，形成一个"向上凸的边界曲线"，那是：</li></ul><p>有效前沿（Efficient Frontier）</p><h3 id=2现在引入一个无风险资产>2.现在引入一个无风险资产<a hidden class=anchor aria-hidden=true href=#2现在引入一个无风险资产>#</a></h3><p>比如：短期国债，固定收益 3%，标准差为 0（无波动）</p><p>我们现在可以干一件以前不能做的事：</p><p>把"无风险资产" 和 &ldquo;任何风险资产组合&rdquo; 做加权投资！</p><p>例如：</p><ul><li>投资组合 = 50% 无风险资产（如年化 3%）</li><li>50% 风险资产（如股票组合年化 8%，σ = 15%）</li></ul><p>那整体组合的：</p><ul><li>预期收益 = 0.5 × 3% + 0.5 × 8% = 5.5%</li><li>风险 = 0.5 × 15% = 7.5% （因为无风险资产波动是 0）</li></ul><p>注意：风险线性增长，收益也线性增长！
这说明：你在两个资产间做线性组合，最终结果也落在一条直线上。</p><h3 id=3这就是资本配置线cal>3.这就是"资本配置线（CAL）"<a hidden class=anchor aria-hidden=true href=#3这就是资本配置线cal>#</a></h3><p>如果你：</p><ul><li>把无风险资产当作左端点</li><li>另一端是某个风险投资组合</li><li>你就可以在这两点之间做任意线性组合（例如 30/70, 60/40 等）</li></ul><p>那么：</p><p>所有这些组合就落在一条穿过无风险收益点、延伸到风险资产组合的直线上，这条线就是：</p><p>资本配置线（CAL, Capital Allocation Line）</p><h3 id=4为什么我们要找最陡的那条线>4.为什么我们要找"最陡的"那条线？<a hidden class=anchor aria-hidden=true href=#4为什么我们要找最陡的那条线>#</a></h3><p>因为：</p><ul><li>线的斜率 = 单位风险所获得的超额收益</li></ul><p>$$\text{CAL 斜率} = \frac{E[R_p] - R_f}{\sigma_p} = \text{Sharpe Ratio}$$</p><ul><li>所以我们希望这条线尽可能"陡"，代表单位波动带来最多收益！</li></ul><p>结论：</p><p>找到和有效前沿"相切"的 CAL，就是找到单位风险回报比（Sharpe）最大的投资组合！</p><p>这个切点对应的组合就是：</p><p>切点投资组合（Tangency Portfolio）</p><ul><li>它是所有风险资产中最优的"基础组合"</li><li>投资者可以根据自己的风险偏好，在这条线上的不同点做组合（加杠杆或持有部分国债）</li></ul><h3 id=5图像理解>5.图像理解：<a hidden class=anchor aria-hidden=true href=#5图像理解>#</a></h3><pre tabindex=0><code>收益 ^
      |
      |        *             ← 有效前沿（风险资产组合）
      |      *    *
      |    *        *
      |  *             *
      |*------------------------→ 风险
     Rf                ↑
       \               |
        \              |
         \             | ← 资本配置线（CAL）
          \            |   ← 最优切点组合
           \___________|
</code></pre><ul><li>Rf：无风险资产</li><li>CAL：从 Rf 向右画出的那条穿过切点组合的直线</li><li>最陡的 CAL → 对应 Sharpe Ratio 最大</li></ul><h3 id=6总结>6.总结<a hidden class=anchor aria-hidden=true href=#6总结>#</a></h3><table><thead><tr><th>概念</th><th>含义</th></tr></thead><tbody><tr><td>无风险资产</td><td>固定收益、零波动，如国债</td></tr><tr><td>资本配置线 CAL</td><td>投资组合 = 无风险资产 + 风险组合</td></tr><tr><td>CAL 斜率</td><td>Sharpe Ratio，单位波动带来的超额收益</td></tr><tr><td>切点组合</td><td>Sharpe 最大，最优风险投资组合</td></tr><tr><td>投资选择</td><td>你可以在 CAL 上移动，根据风险承受能力选择组合</td></tr></tbody></table></div><footer class=post-footer><ul class=post-tags><li><a href=https://xuyafei.github.io/personal-site/tags/%E6%8A%95%E8%B5%84%E7%BB%84%E5%90%88/>投资组合</a></li><li><a href=https://xuyafei.github.io/personal-site/tags/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84/>量化投资</a></li><li><a href=https://xuyafei.github.io/personal-site/tags/%E9%A3%8E%E9%99%A9%E7%AE%A1%E7%90%86/>风险管理</a></li><li><a href=https://xuyafei.github.io/personal-site/tags/%E8%B5%84%E4%BA%A7%E9%85%8D%E7%BD%AE/>资产配置</a></li></ul><nav class=paginav><a class=prev href=https://xuyafei.github.io/personal-site/posts/cpp_this_keyword/><span class=title>« Prev</span><br><span>C++ this关键字详解：从基础到高级应用</span>
</a><a class=next href=https://xuyafei.github.io/personal-site/posts/video_conference_technology/><span class=title>Next »</span><br><span>视频会议系统核心技术详解</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share 量化交易入门指南：第8天 资产配置与均值-方差理论（Mean-Variance Theory） on x" href="https://x.com/intent/tweet/?text=%e9%87%8f%e5%8c%96%e4%ba%a4%e6%98%93%e5%85%a5%e9%97%a8%e6%8c%87%e5%8d%97%ef%bc%9a%e7%ac%ac8%e5%a4%a9%20%e8%b5%84%e4%ba%a7%e9%85%8d%e7%bd%ae%e4%b8%8e%e5%9d%87%e5%80%bc-%e6%96%b9%e5%b7%ae%e7%90%86%e8%ae%ba%ef%bc%88Mean-Variance%20Theory%ef%bc%89&amp;url=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2fquantitative_trading_day8%2f&amp;hashtags=%e6%8a%95%e8%b5%84%e7%bb%84%e5%90%88%2c%e9%87%8f%e5%8c%96%e6%8a%95%e8%b5%84%2c%e9%a3%8e%e9%99%a9%e7%ae%a1%e7%90%86%2c%e8%b5%84%e4%ba%a7%e9%85%8d%e7%bd%ae"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 量化交易入门指南：第8天 资产配置与均值-方差理论（Mean-Variance Theory） on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2fquantitative_trading_day8%2f&amp;title=%e9%87%8f%e5%8c%96%e4%ba%a4%e6%98%93%e5%85%a5%e9%97%a8%e6%8c%87%e5%8d%97%ef%bc%9a%e7%ac%ac8%e5%a4%a9%20%e8%b5%84%e4%ba%a7%e9%85%8d%e7%bd%ae%e4%b8%8e%e5%9d%87%e5%80%bc-%e6%96%b9%e5%b7%ae%e7%90%86%e8%ae%ba%ef%bc%88Mean-Variance%20Theory%ef%bc%89&amp;summary=%e9%87%8f%e5%8c%96%e4%ba%a4%e6%98%93%e5%85%a5%e9%97%a8%e6%8c%87%e5%8d%97%ef%bc%9a%e7%ac%ac8%e5%a4%a9%20%e8%b5%84%e4%ba%a7%e9%85%8d%e7%bd%ae%e4%b8%8e%e5%9d%87%e5%80%bc-%e6%96%b9%e5%b7%ae%e7%90%86%e8%ae%ba%ef%bc%88Mean-Variance%20Theory%ef%bc%89&amp;source=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2fquantitative_trading_day8%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 量化交易入门指南：第8天 资产配置与均值-方差理论（Mean-Variance Theory） on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2fquantitative_trading_day8%2f&title=%e9%87%8f%e5%8c%96%e4%ba%a4%e6%98%93%e5%85%a5%e9%97%a8%e6%8c%87%e5%8d%97%ef%bc%9a%e7%ac%ac8%e5%a4%a9%20%e8%b5%84%e4%ba%a7%e9%85%8d%e7%bd%ae%e4%b8%8e%e5%9d%87%e5%80%bc-%e6%96%b9%e5%b7%ae%e7%90%86%e8%ae%ba%ef%bc%88Mean-Variance%20Theory%ef%bc%89"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 量化交易入门指南：第8天 资产配置与均值-方差理论（Mean-Variance Theory） on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2fquantitative_trading_day8%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 量化交易入门指南：第8天 资产配置与均值-方差理论（Mean-Variance Theory） on whatsapp" href="https://api.whatsapp.com/send?text=%e9%87%8f%e5%8c%96%e4%ba%a4%e6%98%93%e5%85%a5%e9%97%a8%e6%8c%87%e5%8d%97%ef%bc%9a%e7%ac%ac8%e5%a4%a9%20%e8%b5%84%e4%ba%a7%e9%85%8d%e7%bd%ae%e4%b8%8e%e5%9d%87%e5%80%bc-%e6%96%b9%e5%b7%ae%e7%90%86%e8%ae%ba%ef%bc%88Mean-Variance%20Theory%ef%bc%89%20-%20https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2fquantitative_trading_day8%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 量化交易入门指南：第8天 资产配置与均值-方差理论（Mean-Variance Theory） on telegram" href="https://telegram.me/share/url?text=%e9%87%8f%e5%8c%96%e4%ba%a4%e6%98%93%e5%85%a5%e9%97%a8%e6%8c%87%e5%8d%97%ef%bc%9a%e7%ac%ac8%e5%a4%a9%20%e8%b5%84%e4%ba%a7%e9%85%8d%e7%bd%ae%e4%b8%8e%e5%9d%87%e5%80%bc-%e6%96%b9%e5%b7%ae%e7%90%86%e8%ae%ba%ef%bc%88Mean-Variance%20Theory%ef%bc%89&amp;url=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2fquantitative_trading_day8%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 量化交易入门指南：第8天 资产配置与均值-方差理论（Mean-Variance Theory） on ycombinator" href="https://news.ycombinator.com/submitlink?t=%e9%87%8f%e5%8c%96%e4%ba%a4%e6%98%93%e5%85%a5%e9%97%a8%e6%8c%87%e5%8d%97%ef%bc%9a%e7%ac%ac8%e5%a4%a9%20%e8%b5%84%e4%ba%a7%e9%85%8d%e7%bd%ae%e4%b8%8e%e5%9d%87%e5%80%bc-%e6%96%b9%e5%b7%ae%e7%90%86%e8%ae%ba%ef%bc%88Mean-Variance%20Theory%ef%bc%89&u=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2fquantitative_trading_day8%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://xuyafei.github.io/personal-site/>我的博客</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>
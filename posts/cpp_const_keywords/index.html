<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>C++ const系列关键字完全指南 | 我的博客</title><meta name=keywords content="C++,编程,const,教程"><meta name=description content="深入理解C++中的const、constexpr、consteval和constinit关键字"><meta name=author content="徐亚飞"><link rel=canonical href=https://xuyafei.github.io/personal-site/posts/cpp_const_keywords/><link crossorigin=anonymous href=/personal-site/assets/css/stylesheet.93f625d739f1d6a5c6f20c146bc6a8d26b233492b34b2220c54b12fd46a04ded.css integrity="sha256-k/Yl1znx1qXG8gwUa8ao0msjNJKzSyIgxUsS/UagTe0=" rel="preload stylesheet" as=style><link rel=icon href=https://xuyafei.github.io/personal-site/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://xuyafei.github.io/personal-site/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://xuyafei.github.io/personal-site/favicon-32x32.png><link rel=apple-touch-icon href=https://xuyafei.github.io/personal-site/apple-touch-icon.png><link rel=mask-icon href=https://xuyafei.github.io/personal-site/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://xuyafei.github.io/personal-site/posts/cpp_const_keywords/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAYQHy+K8nqKdr1EzvFzSQC+TAXx6gNQgoRxKtj+P9vvCCQTRWiV crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\[",right:"\\]",display:!0},{left:"\\(",right:"\\)",display:!1}],throwOnError:!1})})</script><script>MathJax={tex:{inlineMath:[["$","$"]],displayMath:[["$$","$$"]],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}}</script><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><meta property="og:url" content="https://xuyafei.github.io/personal-site/posts/cpp_const_keywords/"><meta property="og:site_name" content="我的博客"><meta property="og:title" content="C++ const系列关键字完全指南"><meta property="og:description" content="深入理解C++中的const、constexpr、consteval和constinit关键字"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-06-03T00:00:00+00:00"><meta property="article:modified_time" content="2025-06-03T00:00:00+00:00"><meta property="article:tag" content="C++"><meta property="article:tag" content="编程"><meta property="article:tag" content="Const"><meta property="article:tag" content="教程"><meta name=twitter:card content="summary"><meta name=twitter:title content="C++ const系列关键字完全指南"><meta name=twitter:description content="深入理解C++中的const、constexpr、consteval和constinit关键字"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"文章","item":"https://xuyafei.github.io/personal-site/posts/"},{"@type":"ListItem","position":2,"name":"C++ const系列关键字完全指南","item":"https://xuyafei.github.io/personal-site/posts/cpp_const_keywords/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"C++ const系列关键字完全指南","name":"C\u002b\u002b const系列关键字完全指南","description":"深入理解C++中的const、constexpr、consteval和constinit关键字","keywords":["C++","编程","const","教程"],"articleBody":"C++ const系列关键字完全指南 🔰 一、const 的基本语义 const = 只读，不可修改（但不是绝对\"常量\"）\n✅ 常见使用场景： 用法 示例 含义 const变量 const int x = 10; x 的值不可修改 const指针 const int* p; 被指向的值不可改 指针常量 int* const p; 指针自身不可改 const函数参数 void foo(const int\u0026 v); 参数只读传入，避免拷贝 const成员函数 int getValue() const; 不修改类的成员变量 const对象 const MyClass obj; 对象只允许调用 const 成员函数 🧩 二、详细用法拆解 📌 1. 修饰变量 const int x = 100; // x = 200; // ❌ 报错：不能修改 好处：\n表明值不可变，提高可读性和编译器优化 编译器防止误操作 📌 2. 修饰函数参数（值/引用/指针） // a) 传值时加 const 没有意义（拷贝了副本）： void foo(int x); // ✅ void foo(const int x); // ✅ 编译器优化时可帮助内联，但实际用处有限 // b) 引用加 const：防止修改原始变量 void foo(const std::string\u0026 s); // ✅ 推荐，避免拷贝又安全 // c) 指针加 const（有三种情况）： void foo(const int* p); // 指向的数据不可改 void foo(int* const p); // 指针地址不可改 void foo(const int* const p); // 两者都不可改 🧠 口诀：\nconst 在 * 左边：保护内容 const 在 * 右边：保护指针 📌 3. 修饰成员函数（const 成员函数） class MyClass { int data; public: int getData() const { // data++; // ❌ 编译错误：不能修改成员变量 return data; } }; 表示此函数不修改对象的任何成员变量 只能调用其他 const 函数 支持 const对象调用 const MyClass obj; obj.getData(); // ✅ obj.setData(5); // ❌ 错误：不能对 const 对象调用非 const 函数 📌 4. 修饰对象（const对象） const MyClass obj; 该对象不可修改其内部状态 只能调用 const 成员函数 无法修改成员变量，除非成员变量是 mutable 📌 5. 修饰返回值 const std::string getName(); // 返回值是只读副本，无实际意义 const std::string\u0026 getName() const; // ✅ 返回引用且不允许修改，最常用 ⚠️ 三、常见误区和陷阱 ❗ 1. const 变量 vs 宏常量 #define PI 3.14 // 无类型检查、不安全 const double pi = 3.14; // ✅ 有类型检查、作用域清晰 推荐始终使用 const 或 constexpr\n❗ 2. const 成员函数内可以用 mutable 变量 class Logger { mutable int callCount = 0; public: void log() const { ++callCount; // ✅ 因为是 mutable 成员 } }; 🔒 四、const vs constexpr vs consteval 关键字 解释 生命周期 是否运行时可变 是否编译期可计算 const 只读变量 常量 ❌ 有时可，有时不可 constexpr 编译期常量 编译期值 ❌ ✅ 必须能 consteval 编译期强制求值 编译期值 ❌ ✅（立即求值） 示例：\nconstexpr int square(int x) { return x * x; } const int y = square(5); // ✅ int arr[square(3)]; // ✅ 编译期数组大小 ✅ 五、总结表格 用法 是否可改 编译检查 应用场景 const int x ❌ ✅ 常量定义，替代宏 const T\u0026 arg ❌ ✅ 只读引用，避免拷贝 T* const p ✅值 ❌地址 ✅ 指针不能变 const T* p ❌值 ✅地址 ✅ 数据不能改 const T* const p ❌值 ❌地址 ✅ 全保护 const member fn ❌成员 ✅ const 对象可调用 const T\u0026 func() ❌返回值 ✅ 安全暴露内部值 🔍 一张总览表 —— const vs constexpr vs consteval 特性/关键字 const constexpr consteval 引入版本 C++98 C++11（C++20支持更广泛） C++20 主要含义 只读，值一旦设定后不能更改 常量表达式：允许/强制编译期求值 立即求值：必须在编译期求值 修饰对象 变量、函数参数、返回值、成员函数等 变量、函数、构造函数、成员函数 只能修饰函数 编译期求值 ❌ 否（只是不能改，不保证值是编译期可得） ✅ 优先编译期求值（常量上下文） ✅ 必须编译期求值 是否支持运行期 ✅ 是 ✅ 是（如果参数不是常量则运行时执行） ❌ 否，运行期调用会报错 常见用途 防止变量被修改、防止成员函数修改对象 编译期常量、数组大小、模板参数 编译期断言、类型检查、生成函数等 是否强制常量 ❌ 否 ⚠️ 尽量是，非必须 ✅ 必须 🧩 constinit vs consteval 对比 关键字 用途 适用对象 要求 是否常量表达式 是否编译期初始化 用途场景 constinit 保证静态变量初始化在编译期 变量 编译期初始化 ❌ 否（可以修改） ✅ 是 避免静态初始化顺序问题 consteval 保证函数调用在编译期执行 函数 必须编译期调用 ✅ 是（编译期常量） ✅ 是（值计算发生在编译期） 强制常量求值 🧠 关键词理解 constinit：用于变量，要求\"初始化在编译期\"，值不一定是常量 consteval：用于函数，要求\"只能在编译期被调用\"，返回值必须是编译期常量 🧪 示例对比 ✅ constinit 示例：编译期初始化一个全局变量 constinit int x = 42; // ✅ 编译时初始化，运行时可变 x 的值可以在运行时改变 初始化必须是编译期完成的 不能用运行时函数来初始化它 int getValue(); // 假设是运行时函数 constinit int y = getValue(); // ❌ 编译错误：不是常量表达式 ✅ consteval 示例：编译期函数 consteval int square(int x) { return x * x; } constexpr int result = square(5); // ✅ 正确：编译期执行 int main() { std::cout \u003c\u003c result \u003c\u003c std::endl; // 输出 25 } 但注意：\nint runtime_val = 10; int result = square(runtime_val); // ❌ 错误：consteval 函数只能用于编译期 🧠 总结记忆法： 关键字 中文理解 记忆口诀 constinit “常量初始化” 变量初始化一定要早执行 consteval “常量求值” 函数调用一定要早执行 ✅ 常见用途： constinit：写跨文件模块时，避免\"静态初始化顺序未定义\"的 bug constinit Logger logger(\"log.txt\"); // 编译期初始化 consteval：写类型安全的元编程函数（如生成数组长度、做类型判断等） consteval int id() { return __LINE__; } 🎯 总结：如何选择合适的 const 系列关键字 1. 选择 const 的场景 需要只读语义，但不关心是否编译期计算 修饰函数参数，防止意外修改 修饰成员函数，表明不修改对象状态 修饰返回值，防止外部修改 2. 选择 constexpr 的场景 需要编译期计算的值或函数 数组大小、模板参数等需要编译期常量的地方 希望函数既能编译期计算，也支持运行时调用 3. 选择 consteval 的场景 必须保证在编译期执行的函数 编译期类型检查、断言等元编程场景 需要强制编译期求值的场景 4. 选择 constinit 的场景 需要避免静态初始化顺序问题的全局变量 确保变量在编译期完成初始化 跨文件模块中的全局状态管理 🧠 快速决策指南 需求 推荐关键字 原因 只读变量 const 简单直接，最常用 编译期计算 constexpr 灵活，支持编译期和运行时 强制编译期执行 consteval 保证编译期执行，更安全 全局变量初始化 constinit 避免初始化顺序问题 ⚡ 最佳实践建议 优先使用 const\n默认选择 const 作为只读限定符 在函数参数和返回值中广泛使用 合理使用 constexpr\n需要编译期计算时使用 模板元编程场景的首选 谨慎使用 consteval\n只在确实需要强制编译期执行的场景使用 注意其限制性，可能影响代码灵活性 全局变量使用 constinit\n替代传统的全局变量初始化方式 提高代码的可维护性和安全性 🎓 学习建议 从 const 开始，掌握基本的只读语义 理解 constexpr 的编译期计算能力 在需要时使用 consteval 的强制编译期特性 在大型项目中使用 constinit 管理全局状态 记住：这些关键字不是互斥的，而是互补的，共同构成了 C++ 中强大的编译期和运行时安全保障机制。\n","wordCount":"631","inLanguage":"en","datePublished":"2025-06-03T00:00:00Z","dateModified":"2025-06-03T00:00:00Z","author":{"@type":"Person","name":"徐亚飞"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://xuyafei.github.io/personal-site/posts/cpp_const_keywords/"},"publisher":{"@type":"Organization","name":"我的博客","logo":{"@type":"ImageObject","url":"https://xuyafei.github.io/personal-site/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://xuyafei.github.io/personal-site/ accesskey=h title="我的博客 (Alt + H)">我的博客</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://xuyafei.github.io/personal-site/categories/ title=分类><span>分类</span></a></li><li><a href=https://xuyafei.github.io/personal-site/tags/ title=标签><span>标签</span></a></li><li><a href=https://xuyafei.github.io/personal-site/archives/ title=归档><span>归档</span></a></li><li><a href=https://xuyafei.github.io/personal-site/search/ title=搜索><span>搜索</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://xuyafei.github.io/personal-site/>Home</a>&nbsp;»&nbsp;<a href=https://xuyafei.github.io/personal-site/posts/>文章</a></div><h1 class="post-title entry-hint-parent">C++ const系列关键字完全指南</h1><div class=post-description>深入理解C++中的const、constexpr、consteval和constinit关键字</div><div class=post-meta><span title='2025-06-03 00:00:00 +0000 UTC'>June 3, 2025</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;徐亚飞</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#c-const%e7%b3%bb%e5%88%97%e5%85%b3%e9%94%ae%e5%ad%97%e5%ae%8c%e5%85%a8%e6%8c%87%e5%8d%97 aria-label="C++ const系列关键字完全指南">C++ const系列关键字完全指南</a><ul><li><a href=#-%e4%b8%80const-%e7%9a%84%e5%9f%ba%e6%9c%ac%e8%af%ad%e4%b9%89 aria-label="🔰 一、const 的基本语义">🔰 一、const 的基本语义</a><ul><li><a href=#-%e5%b8%b8%e8%a7%81%e4%bd%bf%e7%94%a8%e5%9c%ba%e6%99%af aria-label="✅ 常见使用场景：">✅ 常见使用场景：</a></li></ul></li><li><a href=#-%e4%ba%8c%e8%af%a6%e7%bb%86%e7%94%a8%e6%b3%95%e6%8b%86%e8%a7%a3 aria-label="🧩 二、详细用法拆解">🧩 二、详细用法拆解</a><ul><li><a href=#-1-%e4%bf%ae%e9%a5%b0%e5%8f%98%e9%87%8f aria-label="📌 1. 修饰变量">📌 1. 修饰变量</a></li><li><a href=#-2-%e4%bf%ae%e9%a5%b0%e5%87%bd%e6%95%b0%e5%8f%82%e6%95%b0%e5%80%bc%e5%bc%95%e7%94%a8%e6%8c%87%e9%92%88 aria-label="📌 2. 修饰函数参数（值/引用/指针）">📌 2. 修饰函数参数（值/引用/指针）</a></li><li><a href=#-3-%e4%bf%ae%e9%a5%b0%e6%88%90%e5%91%98%e5%87%bd%e6%95%b0const-%e6%88%90%e5%91%98%e5%87%bd%e6%95%b0 aria-label="📌 3. 修饰成员函数（const 成员函数）">📌 3. 修饰成员函数（const 成员函数）</a></li><li><a href=#-4-%e4%bf%ae%e9%a5%b0%e5%af%b9%e8%b1%a1const%e5%af%b9%e8%b1%a1 aria-label="📌 4. 修饰对象（const对象）">📌 4. 修饰对象（const对象）</a></li><li><a href=#-5-%e4%bf%ae%e9%a5%b0%e8%bf%94%e5%9b%9e%e5%80%bc aria-label="📌 5. 修饰返回值">📌 5. 修饰返回值</a></li></ul></li><li><a href=#-%e4%b8%89%e5%b8%b8%e8%a7%81%e8%af%af%e5%8c%ba%e5%92%8c%e9%99%b7%e9%98%b1 aria-label="⚠️ 三、常见误区和陷阱">⚠️ 三、常见误区和陷阱</a><ul><li><a href=#-1-const-%e5%8f%98%e9%87%8f-vs-%e5%ae%8f%e5%b8%b8%e9%87%8f aria-label="❗ 1. const 变量 vs 宏常量">❗ 1. const 变量 vs 宏常量</a></li><li><a href=#-2-const-%e6%88%90%e5%91%98%e5%87%bd%e6%95%b0%e5%86%85%e5%8f%af%e4%bb%a5%e7%94%a8-mutable-%e5%8f%98%e9%87%8f aria-label="❗ 2. const 成员函数内可以用 mutable 变量">❗ 2. const 成员函数内可以用 mutable 变量</a></li></ul></li><li><a href=#-%e5%9b%9bconst-vs-constexpr-vs-consteval aria-label="🔒 四、const vs constexpr vs consteval">🔒 四、const vs constexpr vs consteval</a></li><li><a href=#-%e4%ba%94%e6%80%bb%e7%bb%93%e8%a1%a8%e6%a0%bc aria-label="✅ 五、总结表格">✅ 五、总结表格</a></li><li><a href=#-%e4%b8%80%e5%bc%a0%e6%80%bb%e8%a7%88%e8%a1%a8--const-vs-constexpr-vs-consteval aria-label="🔍 一张总览表 —— const vs constexpr vs consteval">🔍 一张总览表 —— const vs constexpr vs consteval</a></li><li><a href=#-constinit-vs-consteval-%e5%af%b9%e6%af%94 aria-label="🧩 constinit vs consteval 对比">🧩 constinit vs consteval 对比</a></li><li><a href=#-%e5%85%b3%e9%94%ae%e8%af%8d%e7%90%86%e8%a7%a3 aria-label="🧠 关键词理解">🧠 关键词理解</a></li><li><a href=#-%e7%a4%ba%e4%be%8b%e5%af%b9%e6%af%94 aria-label="🧪 示例对比">🧪 示例对比</a><ul><li><a href=#-constinit-%e7%a4%ba%e4%be%8b%e7%bc%96%e8%af%91%e6%9c%9f%e5%88%9d%e5%a7%8b%e5%8c%96%e4%b8%80%e4%b8%aa%e5%85%a8%e5%b1%80%e5%8f%98%e9%87%8f aria-label="✅ constinit 示例：编译期初始化一个全局变量">✅ constinit 示例：编译期初始化一个全局变量</a></li><li><a href=#-consteval-%e7%a4%ba%e4%be%8b%e7%bc%96%e8%af%91%e6%9c%9f%e5%87%bd%e6%95%b0 aria-label="✅ consteval 示例：编译期函数">✅ consteval 示例：编译期函数</a></li></ul></li><li><a href=#-%e6%80%bb%e7%bb%93%e8%ae%b0%e5%bf%86%e6%b3%95 aria-label="🧠 总结记忆法：">🧠 总结记忆法：</a></li><li><a href=#-%e5%b8%b8%e8%a7%81%e7%94%a8%e9%80%94 aria-label="✅ 常见用途：">✅ 常见用途：</a></li><li><a href=#-%e6%80%bb%e7%bb%93%e5%a6%82%e4%bd%95%e9%80%89%e6%8b%a9%e5%90%88%e9%80%82%e7%9a%84-const-%e7%b3%bb%e5%88%97%e5%85%b3%e9%94%ae%e5%ad%97 aria-label="🎯 总结：如何选择合适的 const 系列关键字">🎯 总结：如何选择合适的 const 系列关键字</a><ul><li><a href=#1-%e9%80%89%e6%8b%a9-const-%e7%9a%84%e5%9c%ba%e6%99%af aria-label="1. 选择 const 的场景">1. 选择 const 的场景</a></li><li><a href=#2-%e9%80%89%e6%8b%a9-constexpr-%e7%9a%84%e5%9c%ba%e6%99%af aria-label="2. 选择 constexpr 的场景">2. 选择 constexpr 的场景</a></li><li><a href=#3-%e9%80%89%e6%8b%a9-consteval-%e7%9a%84%e5%9c%ba%e6%99%af aria-label="3. 选择 consteval 的场景">3. 选择 consteval 的场景</a></li><li><a href=#4-%e9%80%89%e6%8b%a9-constinit-%e7%9a%84%e5%9c%ba%e6%99%af aria-label="4. 选择 constinit 的场景">4. 选择 constinit 的场景</a></li><li><a href=#-%e5%bf%ab%e9%80%9f%e5%86%b3%e7%ad%96%e6%8c%87%e5%8d%97 aria-label="🧠 快速决策指南">🧠 快速决策指南</a></li><li><a href=#-%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%e5%bb%ba%e8%ae%ae aria-label="⚡ 最佳实践建议">⚡ 最佳实践建议</a></li><li><a href=#-%e5%ad%a6%e4%b9%a0%e5%bb%ba%e8%ae%ae aria-label="🎓 学习建议">🎓 学习建议</a></li></ul></li></ul></li></ul></div></details></div><div class=post-content><h1 id=c-const系列关键字完全指南>C++ const系列关键字完全指南<a hidden class=anchor aria-hidden=true href=#c-const系列关键字完全指南>#</a></h1><h2 id=-一const-的基本语义>🔰 一、const 的基本语义<a hidden class=anchor aria-hidden=true href=#-一const-的基本语义>#</a></h2><p>const = 只读，不可修改（但不是绝对"常量"）</p><h3 id=-常见使用场景>✅ 常见使用场景：<a hidden class=anchor aria-hidden=true href=#-常见使用场景>#</a></h3><table><thead><tr><th>用法</th><th>示例</th><th>含义</th></tr></thead><tbody><tr><td>const变量</td><td>const int x = 10;</td><td>x 的值不可修改</td></tr><tr><td>const指针</td><td>const int* p;</td><td>被指向的值不可改</td></tr><tr><td>指针常量</td><td>int* const p;</td><td>指针自身不可改</td></tr><tr><td>const函数参数</td><td>void foo(const int& v);</td><td>参数只读传入，避免拷贝</td></tr><tr><td>const成员函数</td><td>int getValue() const;</td><td>不修改类的成员变量</td></tr><tr><td>const对象</td><td>const MyClass obj;</td><td>对象只允许调用 const 成员函数</td></tr></tbody></table><h2 id=-二详细用法拆解>🧩 二、详细用法拆解<a hidden class=anchor aria-hidden=true href=#-二详细用法拆解>#</a></h2><h3 id=-1-修饰变量>📌 1. 修饰变量<a hidden class=anchor aria-hidden=true href=#-1-修饰变量>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> x <span style=color:#f92672>=</span> <span style=color:#ae81ff>100</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// x = 200; // ❌ 报错：不能修改
</span></span></span></code></pre></div><p>好处：</p><ul><li>表明值不可变，提高可读性和编译器优化</li><li>编译器防止误操作</li></ul><h3 id=-2-修饰函数参数值引用指针>📌 2. 修饰函数参数（值/引用/指针）<a hidden class=anchor aria-hidden=true href=#-2-修饰函数参数值引用指针>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>// a) 传值时加 const 没有意义（拷贝了副本）：
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>foo</span>(<span style=color:#66d9ef>int</span> x);          <span style=color:#75715e>// ✅
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>foo</span>(<span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> x);    <span style=color:#75715e>// ✅ 编译器优化时可帮助内联，但实际用处有限
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// b) 引用加 const：防止修改原始变量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>foo</span>(<span style=color:#66d9ef>const</span> std<span style=color:#f92672>::</span>string<span style=color:#f92672>&amp;</span> s);  <span style=color:#75715e>// ✅ 推荐，避免拷贝又安全
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// c) 指针加 const（有三种情况）：
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>foo</span>(<span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>*</span> p);   <span style=color:#75715e>// 指向的数据不可改
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>foo</span>(<span style=color:#66d9ef>int</span><span style=color:#f92672>*</span> <span style=color:#66d9ef>const</span> p);   <span style=color:#75715e>// 指针地址不可改
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>foo</span>(<span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>*</span> <span style=color:#66d9ef>const</span> p); <span style=color:#75715e>// 两者都不可改
</span></span></span></code></pre></div><p>🧠 口诀：</p><ul><li>const 在 * 左边：保护内容</li><li>const 在 * 右边：保护指针</li></ul><h3 id=-3-修饰成员函数const-成员函数>📌 3. 修饰成员函数（const 成员函数）<a hidden class=anchor aria-hidden=true href=#-3-修饰成员函数const-成员函数>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyClass</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> data;
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> getData() <span style=color:#66d9ef>const</span> {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// data++; // ❌ 编译错误：不能修改成员变量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>return</span> data;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><ul><li>表示此函数不修改对象的任何成员变量</li><li>只能调用其他 const 函数</li><li>支持 const对象调用</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>const</span> MyClass obj;
</span></span><span style=display:flex><span>obj.getData();     <span style=color:#75715e>// ✅
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>obj.setData(<span style=color:#ae81ff>5</span>);    <span style=color:#75715e>// ❌ 错误：不能对 const 对象调用非 const 函数
</span></span></span></code></pre></div><h3 id=-4-修饰对象const对象>📌 4. 修饰对象（const对象）<a hidden class=anchor aria-hidden=true href=#-4-修饰对象const对象>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>const</span> MyClass obj;
</span></span></code></pre></div><ul><li>该对象不可修改其内部状态</li><li>只能调用 const 成员函数</li><li>无法修改成员变量，除非成员变量是 mutable</li></ul><h3 id=-5-修饰返回值>📌 5. 修饰返回值<a hidden class=anchor aria-hidden=true href=#-5-修饰返回值>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>const</span> std<span style=color:#f92672>::</span>string getName();  <span style=color:#75715e>// 返回值是只读副本，无实际意义
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> std<span style=color:#f92672>::</span>string<span style=color:#f92672>&amp;</span> getName() <span style=color:#66d9ef>const</span>;  <span style=color:#75715e>// ✅ 返回引用且不允许修改，最常用
</span></span></span></code></pre></div><h2 id=-三常见误区和陷阱>⚠️ 三、常见误区和陷阱<a hidden class=anchor aria-hidden=true href=#-三常见误区和陷阱>#</a></h2><h3 id=-1-const-变量-vs-宏常量>❗ 1. const 变量 vs 宏常量<a hidden class=anchor aria-hidden=true href=#-1-const-变量-vs-宏常量>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#define PI 3.14           </span><span style=color:#75715e>// 无类型检查、不安全
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>double</span> pi <span style=color:#f92672>=</span> <span style=color:#ae81ff>3.14</span>;   <span style=color:#75715e>// ✅ 有类型检查、作用域清晰
</span></span></span></code></pre></div><p>推荐始终使用 const 或 constexpr</p><h3 id=-2-const-成员函数内可以用-mutable-变量>❗ 2. const 成员函数内可以用 mutable 变量<a hidden class=anchor aria-hidden=true href=#-2-const-成员函数内可以用-mutable-变量>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Logger</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>mutable</span> <span style=color:#66d9ef>int</span> callCount <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> log() <span style=color:#66d9ef>const</span> {
</span></span><span style=display:flex><span>        <span style=color:#f92672>++</span>callCount;  <span style=color:#75715e>// ✅ 因为是 mutable 成员
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><h2 id=-四const-vs-constexpr-vs-consteval>🔒 四、const vs constexpr vs consteval<a hidden class=anchor aria-hidden=true href=#-四const-vs-constexpr-vs-consteval>#</a></h2><table><thead><tr><th>关键字</th><th>解释</th><th>生命周期</th><th>是否运行时可变</th><th>是否编译期可计算</th></tr></thead><tbody><tr><td>const</td><td>只读变量</td><td>常量</td><td>❌</td><td>有时可，有时不可</td></tr><tr><td>constexpr</td><td>编译期常量</td><td>编译期值</td><td>❌</td><td>✅ 必须能</td></tr><tr><td>consteval</td><td>编译期强制求值</td><td>编译期值</td><td>❌</td><td>✅（立即求值）</td></tr></tbody></table><p>示例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>square</span>(<span style=color:#66d9ef>int</span> x) { <span style=color:#66d9ef>return</span> x <span style=color:#f92672>*</span> x; }
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> y <span style=color:#f92672>=</span> square(<span style=color:#ae81ff>5</span>);        <span style=color:#75715e>// ✅
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> arr[square(<span style=color:#ae81ff>3</span>)];             <span style=color:#75715e>// ✅ 编译期数组大小
</span></span></span></code></pre></div><h2 id=-五总结表格>✅ 五、总结表格<a hidden class=anchor aria-hidden=true href=#-五总结表格>#</a></h2><table><thead><tr><th>用法</th><th>是否可改</th><th>编译检查</th><th>应用场景</th></tr></thead><tbody><tr><td>const int x</td><td>❌</td><td>✅</td><td>常量定义，替代宏</td></tr><tr><td>const T& arg</td><td>❌</td><td>✅</td><td>只读引用，避免拷贝</td></tr><tr><td>T* const p</td><td>✅值 ❌地址</td><td>✅</td><td>指针不能变</td></tr><tr><td>const T* p</td><td>❌值 ✅地址</td><td>✅</td><td>数据不能改</td></tr><tr><td>const T* const p</td><td>❌值 ❌地址</td><td>✅</td><td>全保护</td></tr><tr><td>const member fn</td><td>❌成员</td><td>✅</td><td>const 对象可调用</td></tr><tr><td>const T& func()</td><td>❌返回值</td><td>✅</td><td>安全暴露内部值</td></tr></tbody></table><h2 id=-一张总览表--const-vs-constexpr-vs-consteval>🔍 一张总览表 —— const vs constexpr vs consteval<a hidden class=anchor aria-hidden=true href=#-一张总览表--const-vs-constexpr-vs-consteval>#</a></h2><table><thead><tr><th>特性/关键字</th><th>const</th><th>constexpr</th><th>consteval</th></tr></thead><tbody><tr><td>引入版本</td><td>C++98</td><td>C++11（C++20支持更广泛）</td><td>C++20</td></tr><tr><td>主要含义</td><td>只读，值一旦设定后不能更改</td><td>常量表达式：允许/强制编译期求值</td><td>立即求值：必须在编译期求值</td></tr><tr><td>修饰对象</td><td>变量、函数参数、返回值、成员函数等</td><td>变量、函数、构造函数、成员函数</td><td>只能修饰函数</td></tr><tr><td>编译期求值</td><td>❌ 否（只是不能改，不保证值是编译期可得）</td><td>✅ 优先编译期求值（常量上下文）</td><td>✅ 必须编译期求值</td></tr><tr><td>是否支持运行期</td><td>✅ 是</td><td>✅ 是（如果参数不是常量则运行时执行）</td><td>❌ 否，运行期调用会报错</td></tr><tr><td>常见用途</td><td>防止变量被修改、防止成员函数修改对象</td><td>编译期常量、数组大小、模板参数</td><td>编译期断言、类型检查、生成函数等</td></tr><tr><td>是否强制常量</td><td>❌ 否</td><td>⚠️ 尽量是，非必须</td><td>✅ 必须</td></tr></tbody></table><h2 id=-constinit-vs-consteval-对比>🧩 constinit vs consteval 对比<a hidden class=anchor aria-hidden=true href=#-constinit-vs-consteval-对比>#</a></h2><table><thead><tr><th>关键字</th><th>用途</th><th>适用对象</th><th>要求</th><th>是否常量表达式</th><th>是否编译期初始化</th><th>用途场景</th></tr></thead><tbody><tr><td>constinit</td><td>保证静态变量初始化在编译期</td><td>变量</td><td>编译期初始化</td><td>❌ 否（可以修改）</td><td>✅ 是</td><td>避免静态初始化顺序问题</td></tr><tr><td>consteval</td><td>保证函数调用在编译期执行</td><td>函数</td><td>必须编译期调用</td><td>✅ 是（编译期常量）</td><td>✅ 是（值计算发生在编译期）</td><td>强制常量求值</td></tr></tbody></table><h2 id=-关键词理解>🧠 关键词理解<a hidden class=anchor aria-hidden=true href=#-关键词理解>#</a></h2><ul><li>constinit：用于变量，要求"初始化在编译期"，值不一定是常量</li><li>consteval：用于函数，要求"只能在编译期被调用"，返回值必须是编译期常量</li></ul><h2 id=-示例对比>🧪 示例对比<a hidden class=anchor aria-hidden=true href=#-示例对比>#</a></h2><h3 id=-constinit-示例编译期初始化一个全局变量>✅ constinit 示例：编译期初始化一个全局变量<a hidden class=anchor aria-hidden=true href=#-constinit-示例编译期初始化一个全局变量>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>constinit <span style=color:#66d9ef>int</span> x <span style=color:#f92672>=</span> <span style=color:#ae81ff>42</span>;   <span style=color:#75715e>// ✅ 编译时初始化，运行时可变
</span></span></span></code></pre></div><ul><li>x 的值可以在运行时改变</li><li>初始化必须是编译期完成的</li><li>不能用运行时函数来初始化它</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getValue</span>();               <span style=color:#75715e>// 假设是运行时函数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>constinit <span style=color:#66d9ef>int</span> y <span style=color:#f92672>=</span> getValue(); <span style=color:#75715e>// ❌ 编译错误：不是常量表达式
</span></span></span></code></pre></div><h3 id=-consteval-示例编译期函数>✅ consteval 示例：编译期函数<a hidden class=anchor aria-hidden=true href=#-consteval-示例编译期函数>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>consteval</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>square</span>(<span style=color:#66d9ef>int</span> x) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> x <span style=color:#f92672>*</span> x;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>int</span> result <span style=color:#f92672>=</span> square(<span style=color:#ae81ff>5</span>); <span style=color:#75715e>// ✅ 正确：编译期执行
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> result <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;  <span style=color:#75715e>// 输出 25
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>但注意：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>int</span> runtime_val <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> result <span style=color:#f92672>=</span> square(runtime_val); <span style=color:#75715e>// ❌ 错误：consteval 函数只能用于编译期
</span></span></span></code></pre></div><h2 id=-总结记忆法>🧠 总结记忆法：<a hidden class=anchor aria-hidden=true href=#-总结记忆法>#</a></h2><table><thead><tr><th>关键字</th><th>中文理解</th><th>记忆口诀</th></tr></thead><tbody><tr><td>constinit</td><td>&ldquo;常量初始化&rdquo;</td><td>变量初始化一定要早执行</td></tr><tr><td>consteval</td><td>&ldquo;常量求值&rdquo;</td><td>函数调用一定要早执行</td></tr></tbody></table><h2 id=-常见用途>✅ 常见用途：<a hidden class=anchor aria-hidden=true href=#-常见用途>#</a></h2><ul><li>constinit：写跨文件模块时，避免"静态初始化顺序未定义"的 bug</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>constinit Logger <span style=color:#a6e22e>logger</span>(<span style=color:#e6db74>&#34;log.txt&#34;</span>);  <span style=color:#75715e>// 编译期初始化
</span></span></span></code></pre></div><ul><li>consteval：写类型安全的元编程函数（如生成数组长度、做类型判断等）</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>consteval</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>id</span>() { <span style=color:#66d9ef>return</span> __LINE__; }
</span></span></code></pre></div><h2 id=-总结如何选择合适的-const-系列关键字>🎯 总结：如何选择合适的 const 系列关键字<a hidden class=anchor aria-hidden=true href=#-总结如何选择合适的-const-系列关键字>#</a></h2><h3 id=1-选择-const-的场景>1. 选择 const 的场景<a hidden class=anchor aria-hidden=true href=#1-选择-const-的场景>#</a></h3><ul><li>需要只读语义，但不关心是否编译期计算</li><li>修饰函数参数，防止意外修改</li><li>修饰成员函数，表明不修改对象状态</li><li>修饰返回值，防止外部修改</li></ul><h3 id=2-选择-constexpr-的场景>2. 选择 constexpr 的场景<a hidden class=anchor aria-hidden=true href=#2-选择-constexpr-的场景>#</a></h3><ul><li>需要编译期计算的值或函数</li><li>数组大小、模板参数等需要编译期常量的地方</li><li>希望函数既能编译期计算，也支持运行时调用</li></ul><h3 id=3-选择-consteval-的场景>3. 选择 consteval 的场景<a hidden class=anchor aria-hidden=true href=#3-选择-consteval-的场景>#</a></h3><ul><li>必须保证在编译期执行的函数</li><li>编译期类型检查、断言等元编程场景</li><li>需要强制编译期求值的场景</li></ul><h3 id=4-选择-constinit-的场景>4. 选择 constinit 的场景<a hidden class=anchor aria-hidden=true href=#4-选择-constinit-的场景>#</a></h3><ul><li>需要避免静态初始化顺序问题的全局变量</li><li>确保变量在编译期完成初始化</li><li>跨文件模块中的全局状态管理</li></ul><h3 id=-快速决策指南>🧠 快速决策指南<a hidden class=anchor aria-hidden=true href=#-快速决策指南>#</a></h3><table><thead><tr><th>需求</th><th>推荐关键字</th><th>原因</th></tr></thead><tbody><tr><td>只读变量</td><td>const</td><td>简单直接，最常用</td></tr><tr><td>编译期计算</td><td>constexpr</td><td>灵活，支持编译期和运行时</td></tr><tr><td>强制编译期执行</td><td>consteval</td><td>保证编译期执行，更安全</td></tr><tr><td>全局变量初始化</td><td>constinit</td><td>避免初始化顺序问题</td></tr></tbody></table><h3 id=-最佳实践建议>⚡ 最佳实践建议<a hidden class=anchor aria-hidden=true href=#-最佳实践建议>#</a></h3><ol><li><p><strong>优先使用 const</strong></p><ul><li>默认选择 const 作为只读限定符</li><li>在函数参数和返回值中广泛使用</li></ul></li><li><p><strong>合理使用 constexpr</strong></p><ul><li>需要编译期计算时使用</li><li>模板元编程场景的首选</li></ul></li><li><p><strong>谨慎使用 consteval</strong></p><ul><li>只在确实需要强制编译期执行的场景使用</li><li>注意其限制性，可能影响代码灵活性</li></ul></li><li><p><strong>全局变量使用 constinit</strong></p><ul><li>替代传统的全局变量初始化方式</li><li>提高代码的可维护性和安全性</li></ul></li></ol><h3 id=-学习建议>🎓 学习建议<a hidden class=anchor aria-hidden=true href=#-学习建议>#</a></h3><ol><li>从 const 开始，掌握基本的只读语义</li><li>理解 constexpr 的编译期计算能力</li><li>在需要时使用 consteval 的强制编译期特性</li><li>在大型项目中使用 constinit 管理全局状态</li></ol><p>记住：这些关键字不是互斥的，而是互补的，共同构成了 C++ 中强大的编译期和运行时安全保障机制。</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://xuyafei.github.io/personal-site/tags/c++/>C++</a></li><li><a href=https://xuyafei.github.io/personal-site/tags/%E7%BC%96%E7%A8%8B/>编程</a></li><li><a href=https://xuyafei.github.io/personal-site/tags/const/>Const</a></li><li><a href=https://xuyafei.github.io/personal-site/tags/%E6%95%99%E7%A8%8B/>教程</a></li></ul><nav class=paginav><a class=prev href=https://xuyafei.github.io/personal-site/posts/cpp_access_control/><span class=title>« Prev</span><br><span>C++访问控制详解</span>
</a><a class=next href=https://xuyafei.github.io/personal-site/posts/cpp_static_tutorial/><span class=title>Next »</span><br><span>C++ static关键字完全指南</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share C++ const系列关键字完全指南 on x" href="https://x.com/intent/tweet/?text=C%2b%2b%20const%e7%b3%bb%e5%88%97%e5%85%b3%e9%94%ae%e5%ad%97%e5%ae%8c%e5%85%a8%e6%8c%87%e5%8d%97&amp;url=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2fcpp_const_keywords%2f&amp;hashtags=C%2b%2b%2c%e7%bc%96%e7%a8%8b%2cconst%2c%e6%95%99%e7%a8%8b"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share C++ const系列关键字完全指南 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2fcpp_const_keywords%2f&amp;title=C%2b%2b%20const%e7%b3%bb%e5%88%97%e5%85%b3%e9%94%ae%e5%ad%97%e5%ae%8c%e5%85%a8%e6%8c%87%e5%8d%97&amp;summary=C%2b%2b%20const%e7%b3%bb%e5%88%97%e5%85%b3%e9%94%ae%e5%ad%97%e5%ae%8c%e5%85%a8%e6%8c%87%e5%8d%97&amp;source=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2fcpp_const_keywords%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share C++ const系列关键字完全指南 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2fcpp_const_keywords%2f&title=C%2b%2b%20const%e7%b3%bb%e5%88%97%e5%85%b3%e9%94%ae%e5%ad%97%e5%ae%8c%e5%85%a8%e6%8c%87%e5%8d%97"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share C++ const系列关键字完全指南 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2fcpp_const_keywords%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share C++ const系列关键字完全指南 on whatsapp" href="https://api.whatsapp.com/send?text=C%2b%2b%20const%e7%b3%bb%e5%88%97%e5%85%b3%e9%94%ae%e5%ad%97%e5%ae%8c%e5%85%a8%e6%8c%87%e5%8d%97%20-%20https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2fcpp_const_keywords%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share C++ const系列关键字完全指南 on telegram" href="https://telegram.me/share/url?text=C%2b%2b%20const%e7%b3%bb%e5%88%97%e5%85%b3%e9%94%ae%e5%ad%97%e5%ae%8c%e5%85%a8%e6%8c%87%e5%8d%97&amp;url=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2fcpp_const_keywords%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share C++ const系列关键字完全指南 on ycombinator" href="https://news.ycombinator.com/submitlink?t=C%2b%2b%20const%e7%b3%bb%e5%88%97%e5%85%b3%e9%94%ae%e5%ad%97%e5%ae%8c%e5%85%a8%e6%8c%87%e5%8d%97&u=https%3a%2f%2fxuyafei.github.io%2fpersonal-site%2fposts%2fcpp_const_keywords%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://xuyafei.github.io/personal-site/>我的博客</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>